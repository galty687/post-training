<!DOCTYPE html><!--3EsUtLTGumEl2pitYQqAK--><html lang="zh-CN" class="__variable_51740a __variable_3c557b"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/bb3ef058b751a6ad-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/edef1a271f97a8ec-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/582c74093a964a72.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/62a6e77bcc5afb05.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/4cd23781d18a52d3.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-a61f7f8836a0480d.js"/><script src="/_next/static/chunks/6ee9f5d1-587662d01a07af8c.js" async=""></script><script src="/_next/static/chunks/4977-b2b53feb1c871da7.js" async=""></script><script src="/_next/static/chunks/main-app-9a763735f42e0f15.js" async=""></script><script src="/_next/static/chunks/1716-ed56095c0e3eb43d.js" async=""></script><script src="/_next/static/chunks/6098-1ad6a5cc0dfa14ba.js" async=""></script><script src="/_next/static/chunks/app/layout-9d0d0c8d6a45b02d.js" async=""></script><script src="/_next/static/chunks/4285-64b9e8f08c1e911d.js" async=""></script><script src="/_next/static/chunks/1698-20472d0927059867.js" async=""></script><script src="/_next/static/chunks/7997-9f155fcb121a084c.js" async=""></script><script src="/_next/static/chunks/795-ed3635716c096e23.js" async=""></script><script src="/_next/static/chunks/app/docs/layout-bc08591310048441.js" async=""></script><script src="/_next/static/chunks/942c9eea-01405fae79cb4292.js" async=""></script><script src="/_next/static/chunks/8697-8ff18c4921047cfe.js" async=""></script><script src="/_next/static/chunks/6249-ace54a767b378723.js" async=""></script><script src="/_next/static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-6PZFJCKFSJ" as="script"/><meta name="next-size-adjust" content=""/><title>5.2 知识蒸馏 | LLM 后训练课程</title><meta name="description" content="理解经典知识蒸馏范式、LLM 时代的蒸馏实践（DeepSeek-R1-Distill、Qwen3 思考模式融合），以及蒸馏与 RL 训练的权衡"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="flex min-h-screen flex-col"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="bg-fd-secondary/50 p-3 empty:hidden"></div><header id="nd-subnav" class="fixed top-(--fd-banner-height) left-0 right-(--removed-body-scroll-bar-size,0) z-30 flex items-center ps-4 pe-2.5 border-b transition-colors backdrop-blur-sm bg-fd-background/80 h-(--fd-nav-height) on-root:[--fd-nav-height:56px] md:on-root:[--fd-nav-height:0px] md:hidden"><a class="inline-flex items-center gap-2.5 font-semibold" href="/">LLM 后训练实践</a><div class="flex-1"></div><button type="button" class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-4.5 p-2" data-search="" aria-label="Open Search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg></button><button class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground [&amp;_svg]:size-4.5 p-2" aria-label="Open Sidebar"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg></button></header><main id="nd-docs-layout" class="flex flex-1 flex-col pt-(--fd-nav-height) transition-[padding] fd-default-layout mx-(--fd-layout-offset) md:[&amp;_#nd-page_article]:pt-12 xl:[--fd-toc-width:286px] xl:[&amp;_#nd-page_article]:px-8 md:[--fd-sidebar-width:268px] lg:[--fd-sidebar-width:286px]" style="padding-inline-start:var(--fd-sidebar-width)"><div class="fixed flex shadow-lg transition-opacity rounded-xl p-0.5 border bg-fd-muted text-fd-muted-foreground z-10 max-md:hidden xl:start-4 max-xl:end-4 pointer-events-none opacity-0" style="top:calc(var(--fd-banner-height) + var(--fd-tocnav-height) + var(--spacing) * 4)"><button type="button" aria-label="Collapse Sidebar" data-collapsed="false" class="inline-flex items-center justify-center text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground p-1.5 [&amp;_svg]:size-4.5 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg></button><button type="button" class="inline-flex items-center justify-center text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground p-1.5 [&amp;_svg]:size-4.5 rounded-lg" data-search="" aria-label="Open Search"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg></button></div><aside id="nd-sidebar" data-collapsed="false" class="fixed left-0 rtl:left-auto rtl:right-(--removed-body-scroll-bar-size,0) flex flex-col items-end top-(--fd-sidebar-top) bottom-(--fd-sidebar-margin) z-20 bg-fd-card text-sm border-e transition-[top,opacity,translate,width] duration-200 max-md:hidden *:w-(--fd-sidebar-width)" style="--fd-sidebar-offset:calc(16px - 100%);--fd-sidebar-margin:0px;--fd-sidebar-top:calc(var(--fd-banner-height) + var(--fd-nav-height) + var(--fd-sidebar-margin));width:calc(var(--spacing) + var(--fd-sidebar-width) + var(--fd-layout-offset))"><div class="flex flex-col gap-3 p-4 pb-2"><div class="flex"><a class="inline-flex text-[15px] items-center gap-2.5 font-medium me-auto" href="/">LLM 后训练实践</a><button type="button" aria-label="Collapse Sidebar" data-collapsed="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground p-1.5 [&amp;_svg]:size-4.5 mb-auto text-fd-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg></button></div><button type="button" data-search-full="" class="inline-flex items-center gap-2 rounded-lg border bg-fd-secondary/50 p-1.5 ps-2 text-sm text-fd-muted-foreground transition-colors hover:bg-fd-accent hover:text-fd-accent-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-4"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>Search<div class="ms-auto inline-flex gap-0.5"><kbd class="rounded-md border bg-fd-background px-1.5">⌘</kbd><kbd class="rounded-md border bg-fd-background px-1.5">K</kbd></div></button></div><div dir="ltr" class="overflow-hidden h-full" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="size-full rounded-[inherit] p-4 overscroll-contain" style="overflow-x:hidden;overflow-y:hidden;--sidebar-item-offset:calc(var(--spacing) * 2);mask-image:linear-gradient(to bottom, transparent, white 12px, white calc(100% - 12px), transparent)"><div style="min-width:100%;display:table"><a class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none mb-4" data-active="false" href="/docs/">课程内容</a><p class="inline-flex items-center gap-2 mb-1.5 px-2 ps-(--sidebar-item-offset) empty:mb-0 [&amp;_svg]:size-4 [&amp;_svg]:shrink-0">课程内容</p><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/">课程总览</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/grading/">评分标准</a><p class="inline-flex items-center gap-2 mb-1.5 px-2 ps-(--sidebar-item-offset) empty:mb-0 [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 mt-6">授课</p><div data-state="closed"><button type="button" aria-controls="radix-_R_5kqd5ulb_" aria-expanded="false" data-state="closed" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full">第1课：后训练概述与SFT基础<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="closed" id="radix-_R_5kqd5ulb_" hidden="" class="overflow-hidden relative before:content-[&#x27;&#x27;] before:absolute before:w-px before:inset-y-1 before:bg-fd-border before:start-2.5 **:data-[active=true]:before:content-[&#x27;&#x27;] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset:calc(var(--spacing) * 6)"></div></div><div data-state="closed"><button type="button" aria-controls="radix-_R_6kqd5ulb_" aria-expanded="false" data-state="closed" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full">第2课：SFT进阶<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="closed" id="radix-_R_6kqd5ulb_" hidden="" class="overflow-hidden relative before:content-[&#x27;&#x27;] before:absolute before:w-px before:inset-y-1 before:bg-fd-border before:start-2.5 **:data-[active=true]:before:content-[&#x27;&#x27;] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset:calc(var(--spacing) * 6)"></div></div><div data-state="closed"><button type="button" aria-controls="radix-_R_7kqd5ulb_" aria-expanded="false" data-state="closed" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full">第3课：偏好对齐DPO<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="closed" id="radix-_R_7kqd5ulb_" hidden="" class="overflow-hidden relative before:content-[&#x27;&#x27;] before:absolute before:w-px before:inset-y-1 before:bg-fd-border before:start-2.5 **:data-[active=true]:before:content-[&#x27;&#x27;] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset:calc(var(--spacing) * 6)"></div></div><div data-state="closed"><button type="button" aria-controls="radix-_R_8kqd5ulb_" aria-expanded="false" data-state="closed" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full">第4课：RLHF与GRPO<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="closed" id="radix-_R_8kqd5ulb_" hidden="" class="overflow-hidden relative before:content-[&#x27;&#x27;] before:absolute before:w-px before:inset-y-1 before:bg-fd-border before:start-2.5 **:data-[active=true]:before:content-[&#x27;&#x27;] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset:calc(var(--spacing) * 6)"></div></div><div data-state="open"><button type="button" aria-controls="radix-_R_9kqd5ulb_" aria-expanded="true" data-state="open" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full">第5课：压缩部署与扩展<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="open" id="radix-_R_9kqd5ulb_" class="overflow-hidden relative before:content-[&#x27;&#x27;] before:absolute before:w-px before:inset-y-1 before:bg-fd-border before:start-2.5 **:data-[active=true]:before:content-[&#x27;&#x27;] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset:calc(var(--spacing) * 6)"><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/lecture-5/">第5课：模型压缩、部署优化与能力扩展</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/lecture-5/quantization/">5.1 模型量化</a><a data-active="true" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-fd-primary/10 text-fd-primary" href="/docs/lecture-5/knowledge-distillation/">5.2 知识蒸馏</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/lecture-5/capability-extensions/">5.3 能力扩展概览</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/lecture-5/papers/">第5课 推荐论文</a><a data-active="false" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none" href="/docs/lecture-5/lab/">第5课 上机实验</a></div></div><div data-state="closed"><button type="button" aria-controls="radix-_R_akqd5ulb_" aria-expanded="false" data-state="closed" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full">第6课：项目报告与总结<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="closed" id="radix-_R_akqd5ulb_" hidden="" class="overflow-hidden relative before:content-[&#x27;&#x27;] before:absolute before:w-px before:inset-y-1 before:bg-fd-border before:start-2.5 **:data-[active=true]:before:content-[&#x27;&#x27;] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset:calc(var(--spacing) * 6)"></div></div><p class="inline-flex items-center gap-2 mb-1.5 px-2 ps-(--sidebar-item-offset) empty:mb-0 [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 mt-6">资源</p><div data-state="closed"><button type="button" aria-controls="radix-_R_ckqd5ulb_" aria-expanded="false" data-state="closed" class="relative flex flex-row items-center gap-2 rounded-lg p-2 ps-(--sidebar-item-offset) text-start text-fd-muted-foreground [overflow-wrap:anywhere] [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 transition-colors hover:bg-fd-accent/50 hover:text-fd-accent-foreground/80 hover:transition-none w-full">课程资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide ms-auto transition-transform -rotate-90" data-icon="true"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="closed" id="radix-_R_ckqd5ulb_" hidden="" class="overflow-hidden relative before:content-[&#x27;&#x27;] before:absolute before:w-px before:inset-y-1 before:bg-fd-border before:start-2.5 **:data-[active=true]:before:content-[&#x27;&#x27;] **:data-[active=true]:before:bg-fd-primary **:data-[active=true]:before:absolute **:data-[active=true]:before:w-px **:data-[active=true]:before:inset-y-2.5 **:data-[active=true]:before:start-2.5" style="--sidebar-item-offset:calc(var(--spacing) * 6)"></div></div></div></div></div><div class="flex flex-col border-t p-4 pt-2"><div class="flex text-fd-muted-foreground items-center empty:hidden"><button class="inline-flex items-center rounded-full border ms-auto p-0" aria-label="Toggle Theme" data-theme-toggle=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-6.5 rounded-full p-1.5 text-fd-muted-foreground"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-6.5 rounded-full p-1.5 text-fd-muted-foreground"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div></div></aside><div id="nd-page" class="flex flex-1 w-full mx-auto max-w-(--fd-page-width) pt-(--fd-tocnav-height) pe-(--fd-toc-width)"><header id="nd-tocnav" class="fixed pr-(--removed-body-scroll-bar-size,0) z-10 border-b backdrop-blur-sm transition-colors xl:hidden max-xl:on-root:[--fd-tocnav-height:40px] bg-fd-background/80" style="top:calc(var(--fd-banner-height) + var(--fd-nav-height));inset-inline-start:calc(var(--fd-sidebar-width) + var(--fd-layout-offset));inset-inline-end:0" data-state="closed"><button type="button" aria-controls="radix-_R_anpft5ulb_" aria-expanded="false" data-state="closed" class="flex w-full h-(--fd-tocnav-height) items-center text-sm text-fd-muted-foreground gap-2.5 px-4 py-2.5 text-start focus-visible:outline-none [&amp;_svg]:size-4 md:px-6"><svg role="progressbar" viewBox="0 0 24 24" aria-valuenow="0" aria-valuemin="0" aria-valuemax="1" class="shrink-0"><circle cx="12" cy="12" r="11" fill="none" stroke-width="2" class="stroke-current/25"></circle><circle cx="12" cy="12" r="11" fill="none" stroke-width="2" stroke="currentColor" stroke-dasharray="69.11503837897544" stroke-dashoffset="69.11503837897544" stroke-linecap="round" transform="rotate(-90 12 12)" class="transition-all"></circle></svg><span class="grid flex-1 *:my-auto *:row-start-1 *:col-start-1"><span class="truncate transition-all">5.2 知识蒸馏</span><span class="truncate transition-all opacity-0 translate-y-full pointer-events-none"></span></span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide shrink-0 transition-transform mx-0.5"><path d="m6 9 6 6 6-6"></path></svg></button><div data-state="closed" id="radix-_R_anpft5ulb_" hidden="" data-toc-popover="" class="overflow-hidden flex flex-col px-4 max-h-[50vh] md:px-6"></div></header><article class="flex min-w-0 w-full flex-col gap-4 pt-8 px-4 md:px-6 md:mx-auto"><div class="flex items-center gap-1.5 text-sm text-fd-muted-foreground"><span class="truncate text-fd-primary font-medium">第5课：压缩部署与扩展</span></div><h1 class="text-[1.75em] font-semibold">5.2 知识蒸馏</h1><p class="mb-8 text-lg text-fd-muted-foreground">理解经典知识蒸馏范式、LLM 时代的蒸馏实践（DeepSeek-R1-Distill、Qwen3 思考模式融合），以及蒸馏与 RL 训练的权衡</p><div class="prose flex-1"><h2 class="flex scroll-m-28 flex-row items-center gap-2" id="经典知识蒸馏hinton-et-al-2015"><a data-card="" href="#经典知识蒸馏hinton-et-al-2015" class="peer">经典知识蒸馏（Hinton et al., 2015）</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>知识蒸馏（Knowledge Distillation, KD）的核心思想非常直观：用一个大的<strong>教师模型</strong>（Teacher）来指导一个小的<strong>学生模型</strong>（Student）学习。学生不仅要学习正确答案（hard label），还要学习教师对所有选项的<strong>置信度分布</strong>（soft label）。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="软标签中的暗知识"><a data-card="" href="#软标签中的暗知识" class="peer">软标签中的&quot;暗知识&quot;</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>考虑一个分类任务。教师模型对一个样本的输出可能是：</p>
<div class="relative overflow-auto prose-no-margin my-6"><table><thead><tr><th>类别</th><th>硬标签</th><th>教师软标签（T=1）</th><th>教师软标签（T=3）</th></tr></thead><tbody><tr><td>猫</td><td>1</td><td>0.92</td><td>0.58</td></tr><tr><td>狗</td><td>0</td><td>0.05</td><td>0.23</td></tr><tr><td>兔子</td><td>0</td><td>0.02</td><td>0.14</td></tr><tr><td>鸟</td><td>0</td><td>0.01</td><td>0.05</td></tr></tbody></table></div>
<p>硬标签只告诉学生&quot;这是猫&quot;；而软标签还传递了教师的<strong>暗知识</strong>（dark knowledge）——&quot;这个样本有点像狗，不太像鸟&quot;。这种类间相似性信息对学生模型非常有价值。</p>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="蒸馏损失函数"><a data-card="" href="#蒸馏损失函数" class="peer">蒸馏损失函数</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>经典蒸馏使用温度（temperature）参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span> 来软化教师的输出分布：</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>p</mi><mi>i</mi><mi>T</mi></msubsup><mo>=</mo><mfrac><mrow><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>z</mi><mi>i</mi></msub><mi mathvariant="normal">/</mi><mi>T</mi><mo stretchy="false">)</mo></mrow><mrow><munder><mo>∑</mo><mi>j</mi></munder><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>z</mi><mi>j</mi></msub><mi mathvariant="normal">/</mi><mi>T</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">p_i^T = \frac{\exp(z_i / T)}{\sum_j \exp(z_j / T)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1383em;vertical-align:-0.247em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.5488em;vertical-align:-1.1218em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mclose">)</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mop">exp</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1218em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>
<p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>z</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">z_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> 是 logits（未归一化的输出），<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span> 越大，分布越平滑。</p>
<p>学生模型的总损失由两部分组成：</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="script">L</mi><mo>=</mo><mi>α</mi><mo>⋅</mo><munder><munder><mrow><msup><mi>T</mi><mn>2</mn></msup><mo>⋅</mo><mtext>KL</mtext><mrow><mo fence="true">(</mo><msubsup><mi>p</mi><mtext>teacher</mtext><mi>T</mi></msubsup><mtext> </mtext><mi mathvariant="normal">∥</mi><mtext> </mtext><msubsup><mi>p</mi><mtext>student</mtext><mi>T</mi></msubsup><mo fence="true">)</mo></mrow></mrow><mo stretchy="true">⏟</mo></munder><mtext>蒸馏损失（向教师学习）</mtext></munder><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy="false">)</mo><mo>⋅</mo><munder><munder><mrow><mtext>CE</mtext><mo stretchy="false">(</mo><mi>y</mi><mo separator="true">,</mo><msub><mi>p</mi><mtext>student</mtext></msub><mo stretchy="false">)</mo></mrow><mo stretchy="true">⏟</mo></munder><mtext>原始损失（向标签学习）</mtext></munder></mrow><annotation encoding="application/x-tex">\mathcal{L} = \alpha \cdot \underbrace{T^2 \cdot \text{KL}\left(p^T_{\text{teacher}} \,\|\, p^T_{\text{student}}\right)}_{\text{蒸馏损失（向教师学习）}} + (1 - \alpha) \cdot \underbrace{\text{CE}(y, p_{\text{student}})}_{\text{原始损失（向标签学习）}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathcal">L</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.4445em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.5677em;vertical-align:-1.6763em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-1.3237em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">蒸馏损失（向教师学习）</span></span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span class="svg-align" style="top:-2.002em"><span class="pstrut" style="height:3em"></span><span class="stretchy" style="height:0.548em;min-width:1.6em"><span class="brace-left" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"></path></svg></span><span class="brace-center" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"></path></svg></span><span class="brace-right" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"></path></svg></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord text"><span class="mord">KL</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">teacher</span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∥</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8913em"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">student</span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em"><span class="delimsizing size1">)</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.998em"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.6763em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:2.3263em;vertical-align:-1.5763em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em"><span style="top:-1.4237em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">原始损失（向标签学习）</span></span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.75em"><span class="svg-align" style="top:-2.102em"><span class="pstrut" style="height:3em"></span><span class="stretchy" style="height:0.548em;min-width:1.6em"><span class="brace-left" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"></path></svg></span><span class="brace-center" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"></path></svg></span><span class="brace-right" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"></path></svg></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">CE</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">student</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.898em"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5763em"><span></span></span></span></span></span></span></span></span></span>
<div class="flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md" style="--callout-color:var(--color-fd-info, var(--color-fd-muted))"><div role="none" class="w-0.5 bg-(--callout-color)/50 rounded-sm"></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div class="flex flex-col gap-2 min-w-0 flex-1"><div class="text-fd-muted-foreground prose-no-margin empty:hidden"><p><strong>为什么乘以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">T^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>？</strong> 当温度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span> 升高时，softmax 输出的梯度量级会缩小为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>T</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">1/T^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord">1/</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>。乘以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">T^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> 是为了补偿这个效应，使蒸馏损失的梯度量级与温度无关，方便调节 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.0037em">α</span></span></span></span>。</p></div></div></div>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="蒸馏的形式分类"><a data-card="" href="#蒸馏的形式分类" class="peer">蒸馏的形式分类</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<div class="relative overflow-auto prose-no-margin my-6"><table><thead><tr><th>蒸馏类型</th><th>方法</th><th>教师信号</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>Logits 蒸馏</strong></td><td>KL 散度匹配输出分布</td><td>全词表的概率分布</td><td>需要访问教师 logits</td></tr><tr><td><strong>特征蒸馏</strong></td><td>匹配中间层表征</td><td>隐藏层激活</td><td>需要访问教师内部结构</td></tr><tr><td><strong>黑盒蒸馏</strong></td><td>用教师的文本输出做 SFT</td><td>仅文本回复</td><td>仅需 API 访问</td></tr><tr><td><strong>自蒸馏</strong></td><td>模型蒸馏自身的推理链</td><td>自生成的思维链</td><td>无需外部教师</td></tr></tbody></table></div>
<p>在 LLM 时代，<strong>黑盒蒸馏</strong>是最常用的形式——因为我们通常只能通过 API 获取大模型的文本输出，无法访问其 logits 或中间层。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="llm-时代的蒸馏实践"><a data-card="" href="#llm-时代的蒸馏实践" class="peer">LLM 时代的蒸馏实践</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="deepseek-r1-distill-系列"><a data-card="" href="#deepseek-r1-distill-系列" class="peer">DeepSeek-R1-Distill 系列</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>DeepSeek-R1（2025 年 1 月发布）是一个里程碑式的推理模型。它不仅自身能力强大，还通过蒸馏创建了一系列小模型：</p>
<p><strong>蒸馏方案</strong>：将 DeepSeek-R1（671B MoE）的推理能力蒸馏到多个基座模型上。</p>
<div class="relative overflow-auto prose-no-margin my-6"><table><thead><tr><th>蒸馏模型</th><th>基座</th><th>参数量</th><th>AIME 2024</th><th>MATH-500</th><th>GSM8K</th><th>蒸馏数据量</th></tr></thead><tbody><tr><td>R1-Distill-Qwen-1.5B</td><td>Qwen2.5-1.5B</td><td>1.5B</td><td>28.9%</td><td>83.9%</td><td>83.5%</td><td>~800K</td></tr><tr><td>R1-Distill-Qwen-7B</td><td>Qwen2.5-7B</td><td>7B</td><td>55.5%</td><td>92.9%</td><td>89.7%</td><td>~800K</td></tr><tr><td>R1-Distill-Qwen-14B</td><td>Qwen2.5-14B</td><td>14B</td><td>69.7%</td><td>93.9%</td><td>92.1%</td><td>~800K</td></tr><tr><td>R1-Distill-Qwen-32B</td><td>Qwen2.5-32B</td><td>32B</td><td>72.6%</td><td>94.3%</td><td>93.4%</td><td>~800K</td></tr><tr><td>R1-Distill-Llama-8B</td><td>Llama-3.1-8B</td><td>8B</td><td>50.4%</td><td>89.1%</td><td>87.2%</td><td>~800K</td></tr><tr><td>R1-Distill-Llama-70B</td><td>Llama-3.3-70B</td><td>70B</td><td>70.0%</td><td>94.5%</td><td>94.2%</td><td>~800K</td></tr></tbody></table></div>
<div class="flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md" style="--callout-color:var(--color-fd-info, var(--color-fd-muted))"><div role="none" class="w-0.5 bg-(--callout-color)/50 rounded-sm"></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div class="flex flex-col gap-2 min-w-0 flex-1"><div class="text-fd-muted-foreground prose-no-margin empty:hidden"><p><strong>蒸馏数据的构造方法</strong>：DeepSeek 使用 R1 模型在大量数学、代码和推理问题上生成包含完整思维链的回复。这些带有 <code>&lt;think&gt;...&lt;/think&gt;</code> 标签的长推理链成为蒸馏数据，学生模型通过 SFT 学习模仿教师的推理过程。</p></div></div></div>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="蒸馏的本质一种特殊的后训练"><a data-card="" href="#蒸馏的本质一种特殊的后训练" class="peer">蒸馏的本质：一种特殊的后训练</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>从后训练的视角看，<strong>黑盒蒸馏本质上就是用强模型生成的高质量数据对弱模型做 SFT</strong>：</p>
<figure dir="ltr" class="my-4 bg-fd-card rounded-xl shiki relative border shadow-sm outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-2 right-2 z-2 backdrop-blur-lg rounded-lg text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring p-1 [&amp;_svg]:size-4 hover:text-fd-accent-foreground data-[checked]:text-fd-accent-foreground" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></button></div><div class="text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span>蒸馏 ≈ 数据生成（教师模型 → 高质量回复）+ SFT（学生模型学习这些回复）</span></span></code></pre></div></figure>
<p>这解释了为什么蒸馏如此有效——它同时解决了后训练中最关键的<strong>数据质量问题</strong>。教师模型生成的回复自然具有高质量，包含正确的推理步骤和良好的表达方式。</p>
<figure dir="ltr" class="my-4 bg-fd-card rounded-xl shiki relative border shadow-sm outline-none not-prose overflow-hidden text-sm shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><div class="empty:hidden absolute top-2 right-2 z-2 backdrop-blur-lg rounded-lg text-fd-muted-foreground"><button type="button" class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring p-1 [&amp;_svg]:size-4 hover:text-fd-accent-foreground data-[checked]:text-fd-accent-foreground" aria-label="Copy Text"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path></svg></button></div><div class="text-[13px] py-3.5 overflow-auto max-h-[600px] fd-scroll-container" style="--padding-right:calc(var(--spacing) * 8)"><pre class="min-w-full w-max *:flex *:flex-col"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 黑盒蒸馏的典型流程</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># Step 1: 用教师模型生成蒸馏数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> openai </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> OpenAI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> OpenAI(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    base_url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;https://api.deepseek.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    api_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;your-api-key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> generate_distillation_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(prompt):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    &quot;&quot;&quot;用 DeepSeek-R1 生成带思维链的回复&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> client.chat.completions.create(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;deepseek-reasoner&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">        messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: prompt}],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &quot;prompt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: prompt,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &quot;thinking&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: response.choices[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].message.reasoning_content,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &quot;response&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: response.choices[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">].message.content,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># Step 2: 收集蒸馏数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">math_problems </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># GSM8K, MATH 等数据集的问题</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">distill_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [generate_distillation_data(p) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> math_problems]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># Step 3: 格式化为 SFT 训练数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> format_for_sft</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sample):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &quot;messages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: sample[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;prompt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&lt;think&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sample[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x27;thinking&#x27;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">}\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&lt;/think&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\n\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">                f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sample[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&#x27;response&#x27;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            )},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sft_dataset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [format_for_sft(s) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> distill_data]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># Step 4: 用 SFTTrainer 对学生模型进行微调</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># （与标准 SFT 完全相同，只是数据来源不同）</span></span></code></pre></div></figure>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="蒸馏-vs-rl-训练的权衡"><a data-card="" href="#蒸馏-vs-rl-训练的权衡" class="peer">蒸馏 vs RL 训练的权衡</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>DeepSeek-R1 论文中一个重要发现：蒸馏在<strong>小模型</strong>上的效率远高于 RL 训练。</p>
<div class="relative overflow-auto prose-no-margin my-6"><table><thead><tr><th>维度</th><th>蒸馏（Distillation）</th><th>RL 训练（如 GRPO）</th></tr></thead><tbody><tr><td><strong>训练效率</strong></td><td>高（标准 SFT 流程）</td><td>低（需要大量在线采样）</td></tr><tr><td><strong>训练稳定性</strong></td><td>高（监督学习）</td><td>中等（奖励信号稀疏）</td></tr><tr><td><strong>能力上限</strong></td><td>受教师模型制约</td><td>可能超越教师（探索新策略）</td></tr><tr><td><strong>数据需求</strong></td><td>需要教师模型的输出</td><td>需要可验证的奖励函数</td></tr><tr><td><strong>适合模型规模</strong></td><td>1.5B - 14B（小模型）</td><td>7B+（较大模型）</td></tr><tr><td><strong>计算成本</strong></td><td>教师推理 + 学生 SFT</td><td>大量在线采样 + RL 优化</td></tr></tbody></table></div>
<div class="flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md" style="--callout-color:var(--color-fd-warning, var(--color-fd-muted))"><div role="none" class="w-0.5 bg-(--callout-color)/50 rounded-sm"></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg><div class="flex flex-col gap-2 min-w-0 flex-1"><div class="text-fd-muted-foreground prose-no-margin empty:hidden"><p><strong>蒸馏的局限性</strong>：</p><ol>
<li><strong>能力天花板</strong>——学生模型的能力不可能真正超越教师模型。如果教师在某类问题上犯错，学生也会学到错误的推理模式。</li>
<li><strong>风格模仿 vs 能力获得</strong>——蒸馏有时只是让学生模型学会了&quot;看起来像推理&quot;的输出格式，但没有真正获得推理能力。</li>
<li><strong>泛化性</strong>——蒸馏数据的分布有限，学生模型在分布外任务上的泛化可能不如 RL 训练的模型。</li>
</ol></div></div></div>
<p>DeepSeek 的实验结果表明：</p>
<ul>
<li>对于 <strong>1.5B-7B 模型</strong>：蒸馏效果远优于直接 RL 训练（小模型难以通过 RL 发展出复杂推理）</li>
<li>对于 <strong>14B+ 模型</strong>：RL 训练有可能发现教师模型没有的推理策略，但需要更多计算资源</li>
<li><strong>最佳实践</strong>：蒸馏 + RL 的组合——先用蒸馏建立推理基础，再用 RL 进一步优化</li>
</ul>
<h3 class="flex scroll-m-28 flex-row items-center gap-2" id="qwen3-的思考模式融合蒸馏思想的工业级应用"><a data-card="" href="#qwen3-的思考模式融合蒸馏思想的工业级应用" class="peer">Qwen3 的思考模式融合：蒸馏思想的工业级应用</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h3>
<p>Qwen3 的四阶段后训练流程中，**第三阶段&quot;思考模式融合&quot;**本质上是一种自蒸馏：</p>
<div class="fd-steps"><div class="fd-step"><p><strong>Stage 1 — 冷启动 SFT</strong>：用长思维链数据训练模型获得初步推理能力</p></div><div class="fd-step"><p><strong>Stage 2 — 推理 RL</strong>：用 GRPO 在数学/代码任务上强化推理能力。此时模型是&quot;纯思考模型&quot;，始终输出思维链</p></div><div class="fd-step"><p><strong>Stage 3 — 思考模式融合（蒸馏）</strong>：将 Stage 2 的推理能力&quot;蒸馏&quot;回一个统一模型，使其同时支持 thinking mode（带 <code>&lt;think&gt;</code> 标签）和 non-thinking mode（直接回答）。具体方法是用 Stage 2 模型生成的思维链作为训练数据，与不带思维链的通用数据混合训练</p></div><div class="fd-step"><p><strong>Stage 4 — 通用 RL</strong>：对融合后的模型做最终 RL 训练，全面提升各项能力</p></div></div>
<div style="text-align:center;margin:24px 0;padding:20px;background:#FEFCFB;border:1px solid #E8E0DD;border-radius:10px;overflow-x:auto"></div>
<p>这种&quot;将 RL 训练的能力通过数据方式迁移回统一模型&quot;的方法，正是蒸馏思想在 Qwen3 工业级实践中的体现。</p>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="蒸馏在后训练中的定位"><a data-card="" href="#蒸馏在后训练中的定位" class="peer">蒸馏在后训练中的定位</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>将蒸馏放在后训练的整体技术图谱中：</p>
<div class="relative overflow-auto prose-no-margin my-6"><table><thead><tr><th>后训练方法</th><th>训练信号来源</th><th>核心作用</th><th>蒸馏的角色</th></tr></thead><tbody><tr><td>SFT</td><td>人工标注数据</td><td>教模型说话</td><td>蒸馏数据可替代人工标注</td></tr><tr><td>DPO/RLHF</td><td>人类偏好对</td><td>教模型选择</td><td>可用强模型生成偏好对</td></tr><tr><td>GRPO/RLVR</td><td>可验证奖励</td><td>教模型思考</td><td>蒸馏可传递推理能力</td></tr><tr><td>蒸馏</td><td>强模型输出</td><td>能力迁移</td><td>贯穿所有阶段</td></tr></tbody></table></div>
<div class="flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md" style="--callout-color:var(--color-fd-info, var(--color-fd-muted))"><div role="none" class="w-0.5 bg-(--callout-color)/50 rounded-sm"></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg><div class="flex flex-col gap-2 min-w-0 flex-1"><div class="text-fd-muted-foreground prose-no-margin empty:hidden"><p><strong>蒸馏是后训练的&quot;万金油&quot;</strong>：在数据准备阶段，可以用强模型生成 SFT 数据（如 MAGPIE）；在偏好学习阶段，可以用强模型标注偏好对（如 UltraFeedback 使用 GPT-4 评分）；在推理强化阶段，可以直接蒸馏教师的推理链。可以说，<strong>现代后训练的每一步都或多或少地使用了蒸馏</strong>。</p></div></div></div>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="性能对比蒸馏-vs-其他后训练方法"><a data-card="" href="#性能对比蒸馏-vs-其他后训练方法" class="peer">性能对比：蒸馏 vs 其他后训练方法</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<p>以 Qwen2.5-1.5B 为基座，对比不同后训练路径的效果：</p>
<div class="relative overflow-auto prose-no-margin my-6"><table><thead><tr><th>方法</th><th>GSM8K</th><th>MATH-500</th><th>训练成本</th><th>说明</th></tr></thead><tbody><tr><td>Qwen2.5-1.5B（基座）</td><td>~35%</td><td>~25%</td><td>—</td><td>原始预训练模型</td></tr><tr><td>+ SFT（通用数据）</td><td>~50%</td><td>~35%</td><td>$</td><td>学会了回答格式</td></tr><tr><td>+ SFT + DPO</td><td>~53%</td><td>~37%</td><td>$$</td><td>偏好对齐小幅提升</td></tr><tr><td>+ SFT + GRPO（课堂实验级别）</td><td>~55%</td><td>~38%</td><td>$$$</td><td>有限步数的 RL 训练</td></tr><tr><td><strong>R1-Distill-Qwen-1.5B（蒸馏）</strong></td><td><strong>~83.5%</strong></td><td><strong>~83.9%</strong></td><td>$$</td><td>从 671B 教师蒸馏</td></tr></tbody></table></div>
<div class="flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md" style="--callout-color:var(--color-fd-warning, var(--color-fd-muted))"><div role="none" class="w-0.5 bg-(--callout-color)/50 rounded-sm"></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg><div class="flex flex-col gap-2 min-w-0 flex-1"><div class="text-fd-muted-foreground prose-no-margin empty:hidden"><p>蒸馏模型的性能远超同等参数量的 RL 训练模型，但请注意——这个对比并不完全公平，因为蒸馏模型间接利用了教师模型的巨大计算投入。在&quot;单位计算投入&quot;的视角下，蒸馏的效率仍然非常高。</p></div></div></div>
<h2 class="flex scroll-m-28 flex-row items-center gap-2" id="本节小结"><a data-card="" href="#本节小结" class="peer">本节小结</a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100" aria-label="Link to section"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></h2>
<ol>
<li><strong>经典蒸馏</strong>通过软标签传递教师的&quot;暗知识&quot;，温度参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.13889em">T</span></span></span></span> 控制分布的平滑程度</li>
<li><strong>LLM 时代的蒸馏</strong>以黑盒蒸馏（用教师文本输出做 SFT）为主流，DeepSeek-R1-Distill 系列是代表案例</li>
<li><strong>蒸馏 vs RL</strong>：蒸馏在小模型上效率更高、更稳定；RL 在大模型上有潜力超越教师</li>
<li><strong>Qwen3 的思考模式融合</strong>是蒸馏思想的工业级应用——将 RL 训练的推理能力蒸馏回统一模型</li>
<li><strong>蒸馏贯穿后训练全流程</strong>：数据生成、偏好标注、推理能力迁移都可以借助蒸馏</li>
</ol></div><div class="flex flex-row flex-wrap items-center justify-between gap-4 empty:hidden"></div><div class="@container grid gap-4 pb-6 grid-cols-2"><a class="flex flex-col gap-2 rounded-lg border p-4 text-sm transition-colors hover:bg-fd-accent/80 hover:text-fd-accent-foreground @max-lg:col-span-full" href="/docs/lecture-5/quantization/"><div class="inline-flex items-center gap-1.5 font-medium"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide -mx-1 size-4 shrink-0 rtl:rotate-180"><path d="m15 18-6-6 6-6"></path></svg><p>5.1 模型量化</p></div><p class="text-fd-muted-foreground truncate">深入理解模型量化的原理、主流 PTQ 方法（INT8/INT4/GPTQ/AWQ）与 QAT，掌握精度-速度-显存的权衡</p></a><a class="flex flex-col gap-2 rounded-lg border p-4 text-sm transition-colors hover:bg-fd-accent/80 hover:text-fd-accent-foreground @max-lg:col-span-full text-end" href="/docs/lecture-5/capability-extensions/"><div class="inline-flex items-center gap-1.5 font-medium flex-row-reverse"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide -mx-1 size-4 shrink-0 rtl:rotate-180"><path d="m9 18 6-6-6-6"></path></svg><p>5.3 能力扩展概览</p></div><p class="text-fd-muted-foreground truncate">多模态后训练（VLM/LLaVA）、工具使用与智能体（函数调用/MCP）、知识编辑（参数编辑/RAG）三大能力扩展方向</p></a></div></article><div id="nd-toc" class="fixed bottom-0 pt-12 pb-2 pr-(--removed-body-scroll-bar-size,0) max-xl:hidden" style="top:calc(var(--fd-banner-height) + var(--fd-nav-height));inset-inline-end:max(var(--fd-layout-offset), calc(50vw - var(--fd-sidebar-width)/2 - var(--fd-page-width)/2))"><div class="flex h-full w-(--fd-toc-width) max-w-full flex-col pe-4"><h3 class="inline-flex items-center gap-1.5 text-sm text-fd-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide size-4"><path d="M15 18H3"></path><path d="M17 6H3"></path><path d="M21 12H3"></path></svg>On this page</h3><div class="relative min-h-0 text-sm ms-px overflow-auto [scrollbar-width:none] [mask-image:linear-gradient(to_bottom,transparent,white_16px,white_calc(100%-16px),transparent)] py-3"><div role="none" class="absolute top-(--fd-top) h-(--fd-height) w-px bg-fd-primary transition-all"></div><div class="flex flex-col border-s border-fd-foreground/10"><a data-active="false" href="#经典知识蒸馏hinton-et-al-2015" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">经典知识蒸馏（Hinton et al., 2015）</a><a data-active="false" href="#软标签中的暗知识" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">软标签中的&quot;暗知识&quot;</a><a data-active="false" href="#蒸馏损失函数" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">蒸馏损失函数</a><a data-active="false" href="#蒸馏的形式分类" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">蒸馏的形式分类</a><a data-active="false" href="#llm-时代的蒸馏实践" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">LLM 时代的蒸馏实践</a><a data-active="false" href="#deepseek-r1-distill-系列" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">DeepSeek-R1-Distill 系列</a><a data-active="false" href="#蒸馏的本质一种特殊的后训练" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">蒸馏的本质：一种特殊的后训练</a><a data-active="false" href="#蒸馏-vs-rl-训练的权衡" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">蒸馏 vs RL 训练的权衡</a><a data-active="false" href="#qwen3-的思考模式融合蒸馏思想的工业级应用" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-6">Qwen3 的思考模式融合：蒸馏思想的工业级应用</a><a data-active="false" href="#蒸馏在后训练中的定位" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">蒸馏在后训练中的定位</a><a data-active="false" href="#性能对比蒸馏-vs-其他后训练方法" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">性能对比：蒸馏 vs 其他后训练方法</a><a data-active="false" href="#本节小结" class="prose py-1.5 text-sm text-fd-muted-foreground transition-colors [overflow-wrap:anywhere] first:pt-0 last:pb-0 data-[active=true]:text-fd-primary ps-3">本节小结</a></div></div></div></div></div><!--$--><!--/$--></main><script src="/_next/static/chunks/webpack-a61f7f8836a0480d.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[57921,[\"1716\",\"static/chunks/1716-ed56095c0e3eb43d.js\",\"6098\",\"static/chunks/6098-1ad6a5cc0dfa14ba.js\",\"7177\",\"static/chunks/app/layout-9d0d0c8d6a45b02d.js\"],\"\"]\n3:I[28295,[\"1716\",\"static/chunks/1716-ed56095c0e3eb43d.js\",\"6098\",\"static/chunks/6098-1ad6a5cc0dfa14ba.js\",\"7177\",\"static/chunks/app/layout-9d0d0c8d6a45b02d.js\"],\"RootProvider\"]\n4:I[1409,[],\"\"]\n5:I[1813,[],\"\"]\n6:I[58434,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"TreeContextProvider\"]\nb:I[10323,[],\"\"]\n:HL[\"/_next/static/media/bb3ef058b751a6ad-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/edef1a271f97a8ec-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/582c74093a964a72.css\",\"style\"]\n:HL[\"/_next/static/css/62a6e77bcc5afb05.css\",\"style\"]\n:HL[\"/_next/static/css/4cd23781d18a52d3.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"3EsUtLTGumEl2pitYQqAK\",\"p\":\"\",\"c\":[\"\",\"docs\",\"lecture-5\",\"knowledge-distillation\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"lecture-5/knowledge-distillation\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/582c74093a964a72.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/62a6e77bcc5afb05.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4cd23781d18a52d3.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"className\":\"__variable_51740a __variable_3c557b\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"$L2\",null,{\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-6PZFJCKFSJ\",\"strategy\":\"afterInteractive\"}],[\"$\",\"$L2\",null,{\"id\":\"google-analytics\",\"strategy\":\"afterInteractive\",\"children\":\"\\n            window.dataLayer = window.dataLayer || [];\\n            function gtag(){dataLayer.push(arguments);}\\n            gtag('js', new Date());\\n            gtag('config', 'G-6PZFJCKFSJ');\\n          \"}]]}],[\"$\",\"body\",null,{\"className\":\"flex min-h-screen flex-col\",\"children\":[\"$\",\"$L3\",null,{\"search\":{\"options\":{\"type\":\"static\"}},\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}]]}],{\"children\":[\"docs\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"tree\":{\"$id\":\"root\",\"name\":\"课程内容\",\"children\":[{\"$id\":\"#0\",\"type\":\"separator\",\"icon\":\"$undefined\",\"name\":\"课程内容\"},{\"$id\":\"index.md\",\"type\":\"page\",\"name\":\"课程总览\",\"description\":\"大语言模型后训练实践——北京大学软件与微电子学院研究生课程\",\"icon\":\"$undefined\",\"url\":\"/docs\",\"$ref\":{\"file\":\"index.md\"}},{\"$id\":\"grading.mdx\",\"type\":\"page\",\"name\":\"评分标准\",\"description\":\"课程考核方式、各项评分细则与评分标准详细说明\",\"icon\":\"$undefined\",\"url\":\"/docs/grading\",\"$ref\":{\"file\":\"grading.mdx\"}},{\"$id\":\"#3\",\"type\":\"separator\",\"icon\":\"$undefined\",\"name\":\"授课\"},{\"type\":\"folder\",\"name\":\"第1课：后训练概述与SFT基础\",\"icon\":\"$undefined\",\"root\":\"$undefined\",\"defaultOpen\":\"$undefined\",\"description\":\"$undefined\",\"index\":\"$undefined\",\"children\":[{\"$id\":\"lecture-1/index.mdx\",\"type\":\"page\",\"name\":\"第1课：后训练概述与监督微调基础\",\"description\":\"理解后训练在 LLM 开发流程中的位置和核心方法体系，掌握 SFT 训练循环，配置 LoRA/QLoRA 进行参数高效训练\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-1\",\"$ref\":{\"file\":\"lecture-1/index.mdx\"}},{\"$id\":\"lecture-1/post-training-overview.md\",\"type\":\"page\",\"name\":\"1.1 后训练的定义与基本流程\",\"description\":\"理解 LLM 开发的三阶段流程，掌握后训练的核心方法体系，了解 Tülu 3 和 Qwen3 的后训练实践\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-1/post-training-overview\",\"$ref\":{\"file\":\"lecture-1/post-training-overview.md\"}},{\"$id\":\"lecture-1/sft-core-concepts.md\",\"type\":\"page\",\"name\":\"1.2 监督微调核心概念\",\"description\":\"掌握 ChatML 和 Llama 聊天模板格式，理解掩码损失（Masked Loss）的原理，了解数据质量的重要性\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-1/sft-core-concepts\",\"$ref\":{\"file\":\"lecture-1/sft-core-concepts.md\"}},{\"$id\":\"lecture-1/parameter-efficient-ft.mdx\",\"type\":\"page\",\"name\":\"1.3 参数高效微调\",\"description\":\"掌握 LoRA 和 QLoRA 的原理与实践，理解参数高效微调的必要性和显存优化策略\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-1/parameter-efficient-ft\",\"$ref\":{\"file\":\"lecture-1/parameter-efficient-ft.mdx\"}},{\"$id\":\"lecture-1/evaluation-methods.md\",\"type\":\"page\",\"name\":\"1.4 模型评估方法\",\"description\":\"了解 LLM 后训练的主流评估方法：LLM-as-Judge、人类偏好排行榜、能力专项基准和安全评估\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-1/evaluation-methods\",\"$ref\":{\"file\":\"lecture-1/evaluation-methods.md\"}},{\"$id\":\"lecture-1/papers.mdx\",\"type\":\"page\",\"name\":\"第1课 推荐论文\",\"description\":\"第1课推荐阅读的 5 篇核心论文：Tülu 3、LoRA、QLoRA、LIMA、MAGPIE\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-1/papers\",\"$ref\":{\"file\":\"lecture-1/papers.mdx\"}},{\"$id\":\"lecture-1/lab.md\",\"type\":\"page\",\"name\":\"实验1：微调 Qwen3-1.7B 为指令跟随助手\",\"description\":\"使用 QLoRA 和 SFTTrainer 将 Qwen3-1.7B 基座模型微调为指令跟随助手的完整实验\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-1/lab\",\"$ref\":{\"file\":\"lecture-1/lab.md\"}}],\"$id\":\"lecture-1\",\"$ref\":{\"metaFile\":\"lecture-1/meta.json\"}},{\"type\":\"folder\",\"name\":\"第2课：SFT进阶\",\"icon\":\"$undefined\",\"root\":\"$undefined\",\"defaultOpen\":\"$undefined\",\"description\":\"$undefined\",\"index\":\"$undefined\",\"children\":[{\"$id\":\"lecture-2/index.mdx\",\"type\":\"page\",\"name\":\"第2课：SFT 进阶——数据工程与指令微调深入\",\"description\":\"掌握指令数据集的构建与质量控制方法，理解数据混合策略，实践 LLM-as-Judge 系统化评估\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-2\",\"$ref\":{\"file\":\"lecture-2/index.mdx\"}},{\"$id\":\"lecture-2/instruction-datasets.mdx\",\"type\":\"page\",\"name\":\"2.1 指令数据集构建方法\",\"description\":\"从 Self-Instruct 到 MAGPIE 的指令数据集技术演进，数据质量控制方法，数据混合策略\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-2/instruction-datasets\",\"$ref\":{\"file\":\"lecture-2/instruction-datasets.mdx\"}},{\"$id\":\"lecture-2/sft-hyperparameters.mdx\",\"type\":\"page\",\"name\":\"2.2 SFT 超参数实践指南\",\"description\":\"基于 Pareja 等（2024）的系统实验结果，掌握 SFT 核心超参数的选择方法和常见问题诊断\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-2/sft-hyperparameters\",\"$ref\":{\"file\":\"lecture-2/sft-hyperparameters.mdx\"}},{\"$id\":\"lecture-2/llm-as-judge.mdx\",\"type\":\"page\",\"name\":\"2.3 LLM-as-Judge 评估方法\",\"description\":\"深入理解 LLM-as-Judge 评估框架，掌握 MT-Bench 评判模板，了解位置偏差和评委模型选择\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-2/llm-as-judge\",\"$ref\":{\"file\":\"lecture-2/llm-as-judge.mdx\"}},{\"$id\":\"lecture-2/papers.mdx\",\"type\":\"page\",\"name\":\"第2课 推荐论文\",\"description\":\"第2课推荐阅读的 5 篇核心论文：SFT 超参数指南、Self-Instruct、MT-Bench、UltraChat、Deita\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-2/papers\",\"$ref\":{\"file\":\"lecture-2/papers.mdx\"}},{\"$id\":\"lecture-2/lab.md\",\"type\":\"page\",\"name\":\"实验2：构建领域定制 SFT 模型并系统评估\",\"description\":\"从数据分析到模型训练到 LLM-as-Judge 评估的完整指令微调实验，含消融实验\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-2/lab\",\"$ref\":{\"file\":\"lecture-2/lab.md\"}}],\"$id\":\"lecture-2\",\"$ref\":{\"metaFile\":\"lecture-2/meta.json\"}},{\"type\":\"folder\",\"name\":\"第3课：偏好对齐DPO\",\"icon\":\"$undefined\",\"root\":\"$undefined\",\"defaultOpen\":\"$undefined\",\"description\":\"$undefined\",\"index\":\"$undefined\",\"children\":[{\"$id\":\"lecture-3/index.mdx\",\"type\":\"page\",\"name\":\"第3课：偏好对齐——DPO 及其变体\",\"description\":\"理解为什么仅靠 SFT 不足以实现对齐，从 RLHF 目标推导 DPO 损失函数，实现 DPO 训练，并对 DPO 与 SimPO 进行实证比较\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-3\",\"$ref\":{\"file\":\"lecture-3/index.mdx\"}},{\"$id\":\"lecture-3/alignment-problem.mdx\",\"type\":\"page\",\"name\":\"3.1 对齐问题：为什么仅靠 SFT 不够\",\"description\":\"SFT 教会模型'说什么'，但未教会它'如何选择'。人类偏好本质上是比较性的，偏好优化直接捕获这一信号。\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-3/alignment-problem\",\"$ref\":{\"file\":\"lecture-3/alignment-problem.mdx\"}},{\"$id\":\"lecture-3/dpo-derivation.mdx\",\"type\":\"page\",\"name\":\"3.2 DPO 数学推导\",\"description\":\"从 RLHF 目标到 DPO 损失函数的完整四步推导，包括闭式最优策略、奖励重参数化和 Bradley-Terry 代入\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-3/dpo-derivation\",\"$ref\":{\"file\":\"lecture-3/dpo-derivation.mdx\"}},{\"$id\":\"lecture-3/dpo-variants.mdx\",\"type\":\"page\",\"name\":\"3.3 DPO 变体\",\"description\":\"SimPO、KTO、ORPO、IPO 等 DPO 变体的设计理念、数学公式与适用场景比较\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-3/dpo-variants\",\"$ref\":{\"file\":\"lecture-3/dpo-variants.mdx\"}},{\"$id\":\"lecture-3/practical-considerations.mdx\",\"type\":\"page\",\"name\":\"3.4 实践考量\",\"description\":\"在线 vs 离线 DPO、beta 参数敏感性分析、偏好数据质量、当前领域趋势\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-3/practical-considerations\",\"$ref\":{\"file\":\"lecture-3/practical-considerations.mdx\"}},{\"$id\":\"lecture-3/papers.mdx\",\"type\":\"page\",\"name\":\"第3课推荐论文\",\"description\":\"DPO、SimPO、KTO、DPO vs PPO 对比实验、DPO 综述等 5 篇核心论文\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-3/papers\",\"$ref\":{\"file\":\"lecture-3/papers.mdx\"}},{\"$id\":\"lecture-3/lab.mdx\",\"type\":\"page\",\"name\":\"第3课实验：DPO 对齐与 SimPO 对比\",\"description\":\"使用 DPO 对齐 SFT 模型，与 SimPO 进行实证对比，涵盖偏好数据探索、训练、评估的完整流程\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-3/lab\",\"$ref\":{\"file\":\"lecture-3/lab.mdx\"}}],\"$id\":\"lecture-3\",\"$ref\":{\"metaFile\":\"lecture-3/meta.json\"}},{\"type\":\"folder\",\"name\":\"第4课：RLHF与GRPO\",\"icon\":\"$undefined\",\"root\":\"$undefined\",\"defaultOpen\":\"$undefined\",\"description\":\"$undefined\",\"index\":\"$undefined\",\"children\":[{\"$id\":\"lecture-4/index.mdx\",\"type\":\"page\",\"name\":\"第4课：RLHF 原理与推理强化学习（GRPO）\",\"description\":\"理解完整的 RLHF 流程，掌握 GRPO 算法，使用可验证奖励复现迷你 DeepSeek-R1-Zero 实验，观察推理能力的涌现\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-4\",\"$ref\":{\"file\":\"lecture-4/index.mdx\"}},{\"$id\":\"lecture-4/rlhf-pipeline.mdx\",\"type\":\"page\",\"name\":\"4.1 经典 RLHF 流程\",\"description\":\"InstructGPT 三阶段流程、奖励模型训练、PPO 核心组件、四模型架构及常见不稳定性\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-4/rlhf-pipeline\",\"$ref\":{\"file\":\"lecture-4/rlhf-pipeline.mdx\"}},{\"$id\":\"lecture-4/grpo-reasoning.mdx\",\"type\":\"page\",\"name\":\"4.2 GRPO 与推理涌现\",\"description\":\"DeepSeek-R1-Zero 里程碑、GRPO 四步算法详解、RLVR 可验证奖励、DeepSeek-R1 完整流程\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-4/grpo-reasoning\",\"$ref\":{\"file\":\"lecture-4/grpo-reasoning.mdx\"}},{\"$id\":\"lecture-4/grpo-improvements.mdx\",\"type\":\"page\",\"name\":\"4.3 GRPO 改进与测试时计算\",\"description\":\"DAPO、Dr. GRPO、REINFORCE++ 等改进方法，以及测试时计算扩展的概念和与 o1/o3/R1 的连接\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-4/grpo-improvements\",\"$ref\":{\"file\":\"lecture-4/grpo-improvements.mdx\"}},{\"$id\":\"lecture-4/rlhf-engineering.mdx\",\"type\":\"page\",\"name\":\"4.4 RLHF 工程工具\",\"description\":\"TRL、OpenRLHF、veRL 等 RLHF/GRPO 训练工具的功能、架构和使用场景对比\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-4/rlhf-engineering\",\"$ref\":{\"file\":\"lecture-4/rlhf-engineering.mdx\"}},{\"$id\":\"lecture-4/papers.mdx\",\"type\":\"page\",\"name\":\"第4课推荐论文\",\"description\":\"InstructGPT、DeepSeek-R1、DeepSeekMath、Snell et al.、DAPO、Safe RLHF、Qwen3 等 7 篇核心论文\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-4/papers\",\"$ref\":{\"file\":\"lecture-4/papers.mdx\"}},{\"$id\":\"lecture-4/lab.mdx\",\"type\":\"page\",\"name\":\"第4课实验：迷你 DeepSeek-R1-Zero\",\"description\":\"使用 GRPO 训练 Qwen3-1.7B-Base 进行数学推理，观察推理能力的涌现过程，并与蒸馏模型和 Qwen3 思考模式对比\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-4/lab\",\"$ref\":{\"file\":\"lecture-4/lab.mdx\"}}],\"$id\":\"lecture-4\",\"$ref\":{\"metaFile\":\"lecture-4/meta.json\"}},{\"type\":\"folder\",\"name\":\"第5课：压缩部署与扩展\",\"icon\":\"$undefined\",\"root\":\"$undefined\",\"defaultOpen\":\"$undefined\",\"description\":\"$undefined\",\"index\":\"$undefined\",\"children\":[{\"$id\":\"lecture-5/index.mdx\",\"type\":\"page\",\"name\":\"第5课：模型压缩、部署优化与能力扩展\",\"description\":\"掌握模型量化的原理与实践（INT8/INT4/GPTQ/AWQ），理解知识蒸馏在后训练中的角色，了解多模态和工具使用等能力扩展方法\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-5\",\"$ref\":{\"file\":\"lecture-5/index.mdx\"}},{\"$id\":\"lecture-5/quantization.mdx\",\"type\":\"page\",\"name\":\"5.1 模型量化\",\"description\":\"深入理解模型量化的原理、主流 PTQ 方法（INT8/INT4/GPTQ/AWQ）与 QAT，掌握精度-速度-显存的权衡\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-5/quantization\",\"$ref\":{\"file\":\"lecture-5/quantization.mdx\"}},{\"$id\":\"lecture-5/knowledge-distillation.mdx\",\"type\":\"page\",\"name\":\"5.2 知识蒸馏\",\"description\":\"理解经典知识蒸馏范式、LLM 时代的蒸馏实践（DeepSeek-R1-Distill、Qwen3 思考模式融合），以及蒸馏与 RL 训练的权衡\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-5/knowledge-distillation\",\"$ref\":{\"file\":\"lecture-5/knowledge-distillation.mdx\"}},{\"$id\":\"lecture-5/capability-extensions.mdx\",\"type\":\"page\",\"name\":\"5.3 能力扩展概览\",\"description\":\"多模态后训练（VLM/LLaVA）、工具使用与智能体（函数调用/MCP）、知识编辑（参数编辑/RAG）三大能力扩展方向\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-5/capability-extensions\",\"$ref\":{\"file\":\"lecture-5/capability-extensions.mdx\"}},{\"$id\":\"lecture-5/papers.mdx\",\"type\":\"page\",\"name\":\"第5课 推荐论文\",\"description\":\"GPTQ、AWQ、LLaVA、ToolACE、DeepSeek-R1 等 5 篇核心论文，涵盖量化、多模态、工具使用与蒸馏\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-5/papers\",\"$ref\":{\"file\":\"lecture-5/papers.mdx\"}},{\"$id\":\"lecture-5/lab.mdx\",\"type\":\"page\",\"name\":\"第5课 上机实验\",\"description\":\"量化实验（必做）：多精度加载 Qwen3-8B 并评估压缩影响；能力扩展选做（三选一）：蒸馏分析、多模态实验、工具调用实验\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-5/lab\",\"$ref\":{\"file\":\"lecture-5/lab.mdx\"}}],\"$id\":\"lecture-5\",\"$ref\":{\"metaFile\":\"lecture-5/meta.json\"}},{\"type\":\"folder\",\"name\":\"第6课：项目报告与总结\",\"icon\":\"$undefined\",\"root\":\"$undefined\",\"defaultOpen\":\"$undefined\",\"description\":\"$undefined\",\"index\":\"$undefined\",\"children\":[{\"$id\":\"lecture-6/index.mdx\",\"type\":\"page\",\"name\":\"第6课：课程项目报告与总结\",\"description\":\"课程项目报告展示、评分标准，以及后训练技术全景回顾与前沿展望\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-6\",\"$ref\":{\"file\":\"lecture-6/index.mdx\"}},{\"$id\":\"lecture-6/project-directions.mdx\",\"type\":\"page\",\"name\":\"推荐项目方向\",\"description\":\"7 个推荐的课程项目方向，涵盖数学推理、安全对齐、中文写作、代码推理、领域问答、视觉问答、工具调用智能体\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-6/project-directions\",\"$ref\":{\"file\":\"lecture-6/project-directions.mdx\"}},{\"$id\":\"lecture-6/presentation-guide.mdx\",\"type\":\"page\",\"name\":\"演示指南与评分标准\",\"description\":\"项目演示的时间安排、内容要求、评分细则，以及高质量演示的实用技巧\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-6/presentation-guide\",\"$ref\":{\"file\":\"lecture-6/presentation-guide.mdx\"}},{\"$id\":\"lecture-6/course-summary.mdx\",\"type\":\"page\",\"name\":\"课程总结与展望\",\"description\":\"后训练技术完整图谱回顾，从 SFT 到 GRPO 的完整路径，以及后训练领域的前沿研究方向\",\"icon\":\"$undefined\",\"url\":\"/docs/lecture-6/course-summary\",\"$ref\":{\"file\":\"lecture-6/course-summary.mdx\"}}],\"$id\":\"lecture-6\",\"$ref\":{\"metaFile\":\"lecture-6/meta.json\"}},{\"$id\":\"#10\",\"type\":\"separator\",\"icon\":\"$undefined\",\"name\":\"资源\"},{\"type\":\"folder\",\"name\":\"课程资源\",\"icon\":\"$undefined\",\"root\":\"$undefined\",\"defaultOpen\":\"$undefined\",\"description\":\"$undefined\",\"index\":\"$undefined\",\"children\":[{\"$id\":\"resources/setup-guide.mdx\",\"type\":\"page\",\"name\":\"环境配置指南\",\"description\":\"AutoDL 环境搭建、Colab Pro 替代方案、依赖安装、模型预下载、一键启动脚本与验证步骤\",\"icon\":\"$undefined\",\"url\":\"/docs/resources/setup-guide\",\"$ref\":{\"file\":\"resources/setup-guide.mdx\"}},{\"$id\":\"resources/gpu-cost-guide.mdx\",\"type\":\"page\",\"name\":\"GPU 配置与费用估算\",\"description\":\"各课次 GPU 配置推荐、AutoDL 费用明细、省钱技巧与替代平台\",\"icon\":\"$undefined\",\"url\":\"/docs/resources/gpu-cost-guide\",\"$ref\":{\"file\":\"resources/gpu-cost-guide.mdx\"}},{\"$id\":\"resources/references.mdx\",\"type\":\"page\",\"name\":\"完整参考文献\",\"description\":\"按课次整理的全部推荐论文、教材和在线资源\",\"icon\":\"$undefined\",\"url\":\"/docs/resources/references\",\"$ref\":{\"file\":\"resources/references.mdx\"}}],\"$id\":\"resources\",\"$ref\":{\"metaFile\":\"resources/meta.json\"}}]},\"children\":\"$L7\"}]]}],{\"children\":[[\"slug\",\"lecture-5/knowledge-distillation\",\"oc\"],\"$L8\",{\"children\":[\"__PAGE__\",\"$L9\",{},null,false]},null,false]},null,false]},null,false],\"$La\",false]],\"m\":\"$undefined\",\"G\":[\"$b\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:I[64564,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"NavProvider\"]\nd:I[54196,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"Navbar\"]\ne:I[57326,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"default\"]\nf:I[70140,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SearchToggle\"]\n10:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarTrigger\"]\n11:I[54196,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"LayoutBody\"]\n12:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"Sidebar\"]\n13:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d092705"])</script><script>self.__next_f.push([1,"9867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarContentMobile\"]\n14:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarHeader\"]\n15:I[55461,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"ThemeToggle\"]\n16:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarViewport\"]\n17:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarItem\"]\n18:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarPageTree\"]\n19:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarFooter\"]\n1a:I[54196,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635"])</script><script>self.__next_f.push([1,"716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"CollapsibleControl\"]\n1b:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarContent\"]\n1c:I[79896,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"SidebarCollapseTrigger\"]\n1d:I[70140,[\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"1698\",\"static/chunks/1698-20472d0927059867.js\",\"7997\",\"static/chunks/7997-9f155fcb121a084c.js\",\"795\",\"static/chunks/795-ed3635716c096e23.js\",\"4499\",\"static/chunks/app/docs/layout-bc08591310048441.js\"],\"LargeSearchToggle\"]\n1f:I[13652,[],\"OutletBoundary\"]\n21:I[1293,[],\"AsyncMetadataOutlet\"]\n23:I[13652,[],\"ViewportBoundary\"]\n25:I[13652,[],\"MetadataBoundary\"]\n26:\"$Sreact.suspense\"\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"$Lc\",null,{\"transparentMode\":\"$undefined\",\"children\":[[\"$\",\"$Ld\",null,{\"className\":\"h-(--fd-nav-height) on-root:[--fd-nav-height:56px] md:on-root:[--fd-nav-height:0px] md:hidden\",\"children\":[[\"$\",\"$Le\",null,{\"href\":\"/\",\"className\":\"inline-flex items-center gap-2.5 font-semibold\",\"children\":\"LLM 后训练实践\"}],[\"$\",\"div\",null,{\"className\":\"flex-1\",\"children\":\"$undefined\"}],[\"$\",\"$Lf\",null,{\"className\":\"p-2\",\"hideIfDisabled\":true}],[\"$\",\"$L10\",null,{\"className\":\"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground [\u0026_svg]:size-4.5 p-2\",\"children\":[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide\",\"children\":[[[\"$\",\"rect\",\"afitv7\",{\"width\":\"18\",\"height\":\"18\",\"x\":\"3\",\"y\":\"3\",\"rx\":\"2\"}],[\"$\",\"path\",\"fh3hqa\",{\"d\":\"M9 3v18\"}]],\"$undefined\"]}]}]]}],[\"$\",\"$L11\",null,{\"className\":\"md:[\u0026_#nd-page_article]:pt-12 xl:[--fd-toc-width:286px] xl:[\u0026_#nd-page_article]:px-8 md:[--fd-sidebar-width:268px] lg:[--fd-sidebar-width:286px]\",\"children\":[[\"$\",\"$L12\",null,{\"defaultOpenLevel\":\"$undefined\",\"prefetch\":\"$undefined\",\"Mobile\":[\"$\",\"$L13\",null,{\"children\":[[\"$\",\"$L14\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"flex text-fd-muted-foreground items-center gap-1.5\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-1\",\"children\":[]}],null,[\"$\",\"$L15\",null,{\"className\":\"p-0\",\"mode\":\"$undefined\"}],[\"$\",\"$L10\",null,{\"className\":\"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground [\u0026_svg]:size-4.5 p-2\",\"children\":[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide\",\"children\":[[[\"$\",\"rect\",\"afitv7\",{\"width\":\"18\",\"height\":\"18\",\"x\":\"3\",\"y\":\"3\",\"rx\":\"2\"}],[\"$\",\"path\",\"fh3hqa\",{\"d\":\"M9 3v18\"}]],\"$undefined\"]}]}]]}],false,\"$undefined\"]}],[\"$\",\"$L16\",null,{\"children\":[[[\"$\",\"$L17\",\"0\",{\"href\":\"/docs\",\"icon\":\"$undefined\",\"external\":\"$undefined\",\"className\":\"mb-4\",\"children\":\"课程内容\"}]],[\"$\",\"$L18\",null,{\"components\":\"$undefined\"}]]}],[\"$\",\"$L19\",null,{\"className\":\"empty:hidden\",\"children\":\"$undefined\"}]]}],\"Content\":[[\"$\",\"$L1a\",null,{}],[\"$\",\"$L1b\",null,{\"children\":[[\"$\",\"$L14\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"flex\",\"children\":[[\"$\",\"$Le\",null,{\"href\":\"/\",\"className\":\"inline-flex text-[15px] items-center gap-2.5 font-medium me-auto\",\"children\":\"LLM 后训练实践\"}],\"$undefined\",[\"$\",\"$L1c\",null,{\"className\":\"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors duration-100 disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring hover:bg-fd-accent hover:text-fd-accent-foreground p-1.5 [\u0026_svg]:size-4.5 mb-auto text-fd-muted-foreground\",\"children\":[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide\",\"children\":[[[\"$\",\"rect\",\"afitv7\",{\"width\":\"18\",\"height\":\"18\",\"x\":\"3\",\"y\":\"3\",\"rx\":\"2\"}],[\"$\",\"path\",\"fh3hqa\",{\"d\":\"M9 3v18\"}]],\"$undefined\"]}]}]]}],[\"$\",\"$L1d\",null,{\"hideIfDisabled\":true}],false,\"$undefined\"]}],\"$7:props:children:1:props:children:0:props:Mobile:props:children:1\",[\"$\",\"$L19\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"flex text-fd-muted-foreground items-center empty:hidden\",\"children\":[false,[],[\"$\",\"$L15\",null,{\"className\":\"ms-auto p-0\",\"mode\":\"$undefined\"}]]}],\"$undefined\"]}]]}]]}],false,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]\n9:[\"$\",\"$1\",\"c\",{\"children\":[\"$L1e\",null,[\"$\",\"$L1f\",null,{\"children\":[\"$L20\",[\"$\",\"$L21\",null,{\"promise\":\"$@22\"}]]}]]}]\na:[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$L23\",null,{\"children\":\"$L24\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$L25\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$26\",null,{\"fallback\":null,\"children\":\"$L27\"}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"28:I[32853,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"TOCProvider\"]\n29:I[3448,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"PageTOCPopover\"]\n2a:I[3448,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"PageTOCPopoverTrigger\"]\n2b:I[3448,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"PageTOCPopoverContent\"]\n2c:I[32853,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"TOCScrollArea\"]\n2d:I[32853,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"TOCItems\"]\n2e:I[3448,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/c"])</script><script>self.__next_f.push([1,"hunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"PageBreadcrumb\"]\n"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"$L28\",null,{\"toc\":[{\"depth\":2,\"url\":\"#经典知识蒸馏hinton-et-al-2015\",\"title\":\"经典知识蒸馏（Hinton et al., 2015）\"},{\"depth\":3,\"url\":\"#软标签中的暗知识\",\"title\":\"软标签中的\\\"暗知识\\\"\"},{\"depth\":3,\"url\":\"#蒸馏损失函数\",\"title\":\"蒸馏损失函数\"},{\"depth\":3,\"url\":\"#蒸馏的形式分类\",\"title\":\"蒸馏的形式分类\"},{\"depth\":2,\"url\":\"#llm-时代的蒸馏实践\",\"title\":\"LLM 时代的蒸馏实践\"},{\"depth\":3,\"url\":\"#deepseek-r1-distill-系列\",\"title\":\"DeepSeek-R1-Distill 系列\"},{\"depth\":3,\"url\":\"#蒸馏的本质一种特殊的后训练\",\"title\":\"蒸馏的本质：一种特殊的后训练\"},{\"depth\":3,\"url\":\"#蒸馏-vs-rl-训练的权衡\",\"title\":\"蒸馏 vs RL 训练的权衡\"},{\"depth\":3,\"url\":\"#qwen3-的思考模式融合蒸馏思想的工业级应用\",\"title\":\"Qwen3 的思考模式融合：蒸馏思想的工业级应用\"},{\"depth\":2,\"url\":\"#蒸馏在后训练中的定位\",\"title\":\"蒸馏在后训练中的定位\"},{\"depth\":2,\"url\":\"#性能对比蒸馏-vs-其他后训练方法\",\"title\":\"性能对比：蒸馏 vs 其他后训练方法\"},{\"depth\":2,\"url\":\"#本节小结\",\"title\":\"本节小结\"}],\"single\":\"$undefined\",\"children\":[\"$\",\"div\",null,{\"id\":\"nd-page\",\"className\":\"flex flex-1 w-full mx-auto max-w-(--fd-page-width) pt-(--fd-tocnav-height) pe-(--fd-toc-width)\",\"children\":[[\"$\",\"$L29\",null,{\"children\":[[\"$\",\"$L2a\",null,{}],[\"$\",\"$L2b\",null,{\"children\":[\"$undefined\",[\"$\",\"$L2c\",null,{\"children\":[\"$\",\"$L2d\",null,{}]}],\"$undefined\"]}]]}],[\"$\",\"article\",null,{\"children\":[[\"$\",\"$L2e\",null,{}],[[\"$\",\"h1\",null,{\"ref\":\"$undefined\",\"children\":\"5.2 知识蒸馏\",\"className\":\"text-[1.75em] font-semibold\"}],[\"$\",\"p\",null,{\"ref\":\"$undefined\",\"children\":\"理解经典知识蒸馏范式、LLM 时代的蒸馏实践（DeepSeek-R1-Distill、Qwen3 思考模式融合），以及蒸馏与 RL 训练的权衡\",\"className\":\"mb-8 text-lg text-fd-muted-foreground\"}],[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"经典知识蒸馏hinton-et-al-2015\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#经典知识蒸馏hinton-et-al-2015\",\"className\":\"peer\",\"children\":\"经典知识蒸馏（Hinton et al., 2015）\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"知识蒸馏（Knowledge Distillation, KD）的核心思想非常直观：用一个大的\",[\"$\",\"strong\",null,{\"children\":\"教师模型\"}],\"（Teacher）来指导一个小的\",[\"$\",\"strong\",null,{\"children\":\"学生模型\"}],\"（Student）学习。学生不仅要学习正确答案（hard label），还要学习教师对所有选项的\",[\"$\",\"strong\",null,{\"children\":\"置信度分布\"}],\"（soft label）。\"]}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"软标签中的暗知识\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#软标签中的暗知识\",\"className\":\"peer\",\"children\":\"软标签中的\\\"暗知识\\\"\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"考虑一个分类任务。教师模型对一个样本的输出可能是：\"}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"relative overflow-auto prose-no-margin my-6\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"类别\"}],[\"$\",\"th\",null,{\"children\":\"硬标签\"}],[\"$\",\"th\",null,{\"children\":\"教师软标签（T=1）\"}],[\"$\",\"th\",null,{\"children\":\"教师软标签（T=3）\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"猫\"}],[\"$\",\"td\",null,{\"children\":\"1\"}],[\"$\",\"td\",null,{\"children\":\"0.92\"}],[\"$\",\"td\",null,{\"children\":\"0.58\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"狗\"}],[\"$\",\"td\",null,{\"children\":\"0\"}],[\"$\",\"td\",null,{\"children\":\"0.05\"}],[\"$\",\"td\",null,{\"children\":\"0.23\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"兔子\"}],[\"$\",\"td\",null,{\"children\":\"0\"}],[\"$\",\"td\",null,{\"children\":\"0.02\"}],[\"$\",\"td\",null,{\"children\":\"0.14\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"鸟\"}],[\"$\",\"td\",null,{\"children\":\"0\"}],[\"$\",\"td\",null,{\"children\":\"0.01\"}],[\"$\",\"td\",null,{\"children\":\"0.05\"}]]}]]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"硬标签只告诉学生\\\"这是猫\\\"；而软标签还传递了教师的\",[\"$\",\"strong\",null,{\"children\":\"暗知识\"}],\"（dark knowledge）——\\\"这个样本有点像狗，不太像鸟\\\"。这种类间相似性信息对学生模型非常有价值。\"]}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"蒸馏损失函数\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#蒸馏损失函数\",\"className\":\"peer\",\"children\":\"蒸馏损失函数\"}],\"$L2f\"]}],\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\"],\"className\":\"prose flex-1\"}]],\"$L59\",\"$L5a\"],\"className\":\"flex min-w-0 w-full flex-col gap-4 pt-8 px-4 md:px-6 md:mx-auto\"}],\"$L5b\"]}]}]\n"])</script><script>self.__next_f.push([1,"74:I[50646,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"CodeBlock\"]\n75:I[50646,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"Pre\"]\n99:I[54137,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"Mermaid\"]\n9a:I[3448,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"PageFooter\"]\n9b:I[3448,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"PageTOC\"]\n9c:I[13734,[\"2569\",\"static/chunks/942c9eea-01405fae79cb4292.js\",\"4285\",\"static/chunks/4285-64b9e8f08c1e911d.js\",\"8697\",\"static/chunks/8697-8ff18c4921047cfe.js\",\"6249\",\"static/chunks/6249-ace54a767b378723.js\",\"7870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-19c7862b357e04ad.js\"],\"I18nLabel\"]\n2f:[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 tex"])</script><script>self.__next_f.push([1,"t-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]\n"])</script><script>self.__next_f.push([1,"30:[\"$\",\"p\",null,{\"children\":[\"经典蒸馏使用温度（temperature）参数 \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"mi\",null,{\"children\":\"T\"}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"T\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.6833em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]]}]}]]}],\" 来软化教师的输出分布：\"]}]\n"])</script><script>self.__next_f.push([1,"31:[\"$\",\"span\",null,{\"className\":\"katex-display\",\"children\":[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"display\":\"block\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"msubsup\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"p\"}],[\"$\",\"mi\",null,{\"children\":\"i\"}],[\"$\",\"mi\",null,{\"children\":\"T\"}]]}],[\"$\",\"mo\",null,{\"children\":\"=\"}],[\"$\",\"mfrac\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"exp\"}],[\"$\",\"mo\",null,{\"children\":\"⁡\"}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\"(\"}],[\"$\",\"msub\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"z\"}],[\"$\",\"mi\",null,{\"children\":\"i\"}]]}],[\"$\",\"mi\",null,{\"mathvariant\":\"normal\",\"children\":\"/\"}],[\"$\",\"mi\",null,{\"children\":\"T\"}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\")\"}]]}],[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"munder\",null,{\"children\":[[\"$\",\"mo\",null,{\"children\":\"∑\"}],[\"$\",\"mi\",null,{\"children\":\"j\"}]]}],[\"$\",\"mi\",null,{\"children\":\"exp\"}],[\"$\",\"mo\",null,{\"children\":\"⁡\"}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\"(\"}],[\"$\",\"msub\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"z\"}],[\"$\",\"mi\",null,{\"children\":\"j\"}]]}],[\"$\",\"mi\",null,{\"mathvariant\":\"normal\",\"children\":\"/\"}],[\"$\",\"mi\",null,{\"children\":\"T\"}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\")\"}]]}]]}]]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"p_i^T = \\\\frac{\\\\exp(z_i / T)}{\\\\sum_j \\\\exp(z_j / T)}\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"1.1383em\",\"verticalAlign\":\"-0.247em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"children\":\"p\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8913em\"},\"children\":[[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.453em\",\"marginLeft\":\"0em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"children\":\"i\"}]}]]}],[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.113em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]}]]}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.247em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]}]]}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",null,{\"className\":\"mrel\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}]]}],[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"2.5488em\",\"verticalAlign\":\"-1.1218em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mopen nulldelimiter\"}],[\"$\",\"span\",null,{\"className\":\"mfrac\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"1.427em\"},\"children\":[[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.314em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mop\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mop op-symbol small-op\",\"style\":{\"position\":\"relative\",\"top\":\"0em\"},\"children\":\"∑\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.162em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.4003em\",\"marginLeft\":\"0em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"style\":{\"marginRight\":\"0.05724em\"},\"children\":\"j\"}]}]]}]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.4358em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]}]]}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",null,{\"className\":\"mop\",\"children\":\"exp\"}],[\"$\",\"span\",null,{\"className\":\"mopen\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.04398em\"},\"children\":\"z\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":\"$L5c\"}]]}],\"$L5d\",\"$L5e\",\"$L5f\"]}]]}],\"$L60\",\"$L61\"]}],\"$L62\"]}],\"$L63\"]}]}],\"$L64\"]}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"p\",null,{\"children\":[\"其中 \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"msub\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"z\"}],[\"$\",\"mi\",null,{\"children\":\"i\"}]]}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"z_i\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.5806em\",\"verticalAlign\":\"-0.15em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.04398em\"},\"children\":\"z\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.3117em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.55em\",\"marginLeft\":\"-0.044em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"children\":\"i\"}]}]]}]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.15em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]}]]}]]}]}]]}],\" 是 logits（未归一化的输出），\",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"mi\",null,{\"children\":\"T\"}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"T\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.6833em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]]}]}]]}],\" 越大，分布越平滑。\"]}]\n"])</script><script>self.__next_f.push([1,"33:[\"$\",\"p\",null,{\"children\":\"学生模型的总损失由两部分组成：\"}]\n"])</script><script>self.__next_f.push([1,"34:[\"$\",\"span\",null,{\"className\":\"katex-display\",\"children\":[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"display\":\"block\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"mi\",null,{\"mathvariant\":\"script\",\"children\":\"L\"}],[\"$\",\"mo\",null,{\"children\":\"=\"}],[\"$\",\"mi\",null,{\"children\":\"α\"}],[\"$\",\"mo\",null,{\"children\":\"⋅\"}],[\"$\",\"munder\",null,{\"children\":[[\"$\",\"munder\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"msup\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"T\"}],[\"$\",\"mn\",null,{\"children\":\"2\"}]]}],[\"$\",\"mo\",null,{\"children\":\"⋅\"}],[\"$\",\"mtext\",null,{\"children\":\"KL\"}],[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"mo\",null,{\"fence\":\"true\",\"children\":\"(\"}],[\"$\",\"msubsup\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"p\"}],[\"$\",\"mtext\",null,{\"children\":\"teacher\"}],[\"$\",\"mi\",null,{\"children\":\"T\"}]]}],[\"$\",\"mtext\",null,{\"children\":\" \"}],[\"$\",\"mi\",null,{\"mathvariant\":\"normal\",\"children\":\"∥\"}],[\"$\",\"mtext\",null,{\"children\":\" \"}],[\"$\",\"msubsup\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"p\"}],[\"$\",\"mtext\",null,{\"children\":\"student\"}],[\"$\",\"mi\",null,{\"children\":\"T\"}]]}],[\"$\",\"mo\",null,{\"fence\":\"true\",\"children\":\")\"}]]}]]}],[\"$\",\"mo\",null,{\"stretchy\":\"true\",\"children\":\"⏟\"}]]}],[\"$\",\"mtext\",null,{\"children\":\"蒸馏损失（向教师学习）\"}]]}],[\"$\",\"mo\",null,{\"children\":\"+\"}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\"(\"}],[\"$\",\"mn\",null,{\"children\":\"1\"}],[\"$\",\"mo\",null,{\"children\":\"−\"}],[\"$\",\"mi\",null,{\"children\":\"α\"}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\")\"}],[\"$\",\"mo\",null,{\"children\":\"⋅\"}],[\"$\",\"munder\",null,{\"children\":[[\"$\",\"munder\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"mtext\",null,{\"children\":\"CE\"}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\"(\"}],[\"$\",\"mi\",null,{\"children\":\"y\"}],[\"$\",\"mo\",null,{\"separator\":\"true\",\"children\":\",\"}],[\"$\",\"msub\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"p\"}],[\"$\",\"mtext\",null,{\"children\":\"student\"}]]}],[\"$\",\"mo\",null,{\"stretchy\":\"false\",\"children\":\")\"}]]}],[\"$\",\"mo\",null,{\"stretchy\":\"true\",\"children\":\"⏟\"}]]}],[\"$\",\"mtext\",null,{\"children\":\"原始损失（向标签学习）\"}]]}]]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"\\\\mathcal{L} = \\\\alpha \\\\cdot \\\\underbrace{T^2 \\\\cdot \\\\text{KL}\\\\left(p^T_{\\\\text{teacher}} \\\\,\\\\|\\\\, p^T_{\\\\text{student}}\\\\right)}_{\\\\text{蒸馏损失（向教师学习）}} + (1 - \\\\alpha) \\\\cdot \\\\underbrace{\\\\text{CE}(y, p_{\\\\text{student}})}_{\\\\text{原始损失（向标签学习）}}\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.6833em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathcal\",\"children\":\"L\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}],[\"$\",\"span\",null,{\"className\":\"mrel\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2778em\"}}]]}],[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.4445em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.0037em\"},\"children\":\"α\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}],[\"$\",\"span\",null,{\"className\":\"mbin\",\"children\":\"⋅\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}]]}],[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"2.5677em\",\"verticalAlign\":\"-1.6763em\"}}],[\"$\",\"span\",null,{\"className\":\"mord munder\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8913em\"},\"children\":[[\"$\",\"span\",null,{\"style\":{\"top\":\"-1.3237em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord text mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord cjk_fallback mtight\",\"children\":\"蒸馏损失（向教师学习）\"}]}]}]}]]}],[\"$\",\"span\",null,{\"style\":{\"top\":\"-3em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"mord munder\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8913em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"svg-align\",\"style\":{\"top\":\"-2.002em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"stretchy\",\"style\":{\"height\":\"0.548em\",\"minWidth\":\"1.6em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"brace-left\",\"style\":{\"height\":\"0.548em\"},\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"400em\",\"height\":\"0.548em\",\"viewBox\":\"0 0 400000 548\",\"preserveAspectRatio\":\"xMinYMin slice\",\"children\":[\"$\",\"path\",null,{\"d\":\"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z\"}]}]}],\"$L65\",\"$L66\"]}]]}],\"$L67\"]}],\"$L68\"]}],\"$L69\"]}]}]]}]]}],\"$L6a\"]}],\"$L6b\"]}]}],\"$L6c\",\"$L6d\",\"$L6e\"]}],\"$L6f\",\"$L70\",\"$L71\"]}]]}]}]\n"])</script><script>self.__next_f.push([1,"35:[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md\",\"style\":{\"--callout-color\":\"var(--color-fd-info, var(--color-fd-muted))\"},\"children\":[[\"$\",\"div\",null,{\"role\":\"none\",\"className\":\"w-0.5 bg-(--callout-color)/50 rounded-sm\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card\",\"children\":[[[\"$\",\"circle\",\"1mglay\",{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}],[\"$\",\"path\",\"1dtifu\",{\"d\":\"M12 16v-4\"}],[\"$\",\"path\",\"e9boi3\",{\"d\":\"M12 8h.01\"}]],\"$undefined\"]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-2 min-w-0 flex-1\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"text-fd-muted-foreground prose-no-margin empty:hidden\",\"children\":[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"为什么乘以 \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"msup\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"T\"}],[\"$\",\"mn\",null,{\"children\":\"2\"}]]}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"T^2\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.8141em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8141em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.063em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":\"2\"}]}]]}]}]}]}]}]]}]]}]}]]}],\"？\"]}],\" 当温度 \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"mi\",null,{\"children\":\"T\"}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"T\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.6833em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]]}]}]]}],\" 升高时，softmax 输出的梯度量级会缩小为 \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[[\"$\",\"mn\",null,{\"children\":\"1\"}],[\"$\",\"mi\",null,{\"mathvariant\":\"normal\",\"children\":\"/\"}],[\"$\",\"msup\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"T\"}],[\"$\",\"mn\",null,{\"children\":\"2\"}]]}]]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"1/T^2\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"1.0641em\",\"verticalAlign\":\"-0.25em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"1/\"}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8141em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.063em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":\"2\"}]}]]}]}]}]}]}]]}]]}]}]]}],\"。乘以 \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"msup\",null,{\"children\":[[\"$\",\"mi\",null,{\"children\":\"T\"}],[\"$\",\"mn\",null,{\"children\":\"2\"}]]}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"T^2\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":\"$L72\"}]]}],\" 是为了补偿这个效应，使蒸馏损失的梯度量级与温度无关，方便调节 \",\"$L73\",\"。\"]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"36:[\"$\",\"h3\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"蒸馏的形式分类\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#蒸馏的形式分类\",\"className\":\"peer\",\"children\":\"蒸馏的形式分类\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"37:[\"$\",\"div\",null,{\"className\":\"relative overflow-auto prose-no-margin my-6\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"蒸馏类型\"}],[\"$\",\"th\",null,{\"children\":\"方法\"}],[\"$\",\"th\",null,{\"children\":\"教师信号\"}],[\"$\",\"th\",null,{\"children\":\"适用场景\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Logits 蒸馏\"}]}],[\"$\",\"td\",null,{\"children\":\"KL 散度匹配输出分布\"}],[\"$\",\"td\",null,{\"children\":\"全词表的概率分布\"}],[\"$\",\"td\",null,{\"children\":\"需要访问教师 logits\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"特征蒸馏\"}]}],[\"$\",\"td\",null,{\"children\":\"匹配中间层表征\"}],[\"$\",\"td\",null,{\"children\":\"隐藏层激活\"}],[\"$\",\"td\",null,{\"children\":\"需要访问教师内部结构\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"黑盒蒸馏\"}]}],[\"$\",\"td\",null,{\"children\":\"用教师的文本输出做 SFT\"}],[\"$\",\"td\",null,{\"children\":\"仅文本回复\"}],[\"$\",\"td\",null,{\"children\":\"仅需 API 访问\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"自蒸馏\"}]}],[\"$\",\"td\",null,{\"children\":\"模型蒸馏自身的推理链\"}],[\"$\",\"td\",null,{\"children\":\"自生成的思维链\"}],[\"$\",\"td\",null,{\"children\":\"无需外部教师\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"38:[\"$\",\"p\",null,{\"children\":[\"在 LLM 时代，\",[\"$\",\"strong\",null,{\"children\":\"黑盒蒸馏\"}],\"是最常用的形式——因为我们通常只能通过 API 获取大模型的文本输出，无法访问其 logits 或中间层。\"]}]\n"])</script><script>self.__next_f.push([1,"39:[\"$\",\"h2\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"llm-时代的蒸馏实践\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#llm-时代的蒸馏实践\",\"className\":\"peer\",\"children\":\"LLM 时代的蒸馏实践\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"3a:[\"$\",\"h3\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"deepseek-r1-distill-系列\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#deepseek-r1-distill-系列\",\"className\":\"peer\",\"children\":\"DeepSeek-R1-Distill 系列\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"3b:[\"$\",\"p\",null,{\"children\":\"DeepSeek-R1（2025 年 1 月发布）是一个里程碑式的推理模型。它不仅自身能力强大，还通过蒸馏创建了一系列小模型：\"}]\n3c:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"蒸馏方案\"}],\"：将 DeepSeek-R1（671B MoE）的推理能力蒸馏到多个基座模型上。\"]}]\n"])</script><script>self.__next_f.push([1,"3d:[\"$\",\"div\",null,{\"className\":\"relative overflow-auto prose-no-margin my-6\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"蒸馏模型\"}],[\"$\",\"th\",null,{\"children\":\"基座\"}],[\"$\",\"th\",null,{\"children\":\"参数量\"}],[\"$\",\"th\",null,{\"children\":\"AIME 2024\"}],[\"$\",\"th\",null,{\"children\":\"MATH-500\"}],[\"$\",\"th\",null,{\"children\":\"GSM8K\"}],[\"$\",\"th\",null,{\"children\":\"蒸馏数据量\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"R1-Distill-Qwen-1.5B\"}],[\"$\",\"td\",null,{\"children\":\"Qwen2.5-1.5B\"}],[\"$\",\"td\",null,{\"children\":\"1.5B\"}],[\"$\",\"td\",null,{\"children\":\"28.9%\"}],[\"$\",\"td\",null,{\"children\":\"83.9%\"}],[\"$\",\"td\",null,{\"children\":\"83.5%\"}],[\"$\",\"td\",null,{\"children\":\"~800K\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"R1-Distill-Qwen-7B\"}],[\"$\",\"td\",null,{\"children\":\"Qwen2.5-7B\"}],[\"$\",\"td\",null,{\"children\":\"7B\"}],[\"$\",\"td\",null,{\"children\":\"55.5%\"}],[\"$\",\"td\",null,{\"children\":\"92.9%\"}],[\"$\",\"td\",null,{\"children\":\"89.7%\"}],[\"$\",\"td\",null,{\"children\":\"~800K\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"R1-Distill-Qwen-14B\"}],[\"$\",\"td\",null,{\"children\":\"Qwen2.5-14B\"}],[\"$\",\"td\",null,{\"children\":\"14B\"}],[\"$\",\"td\",null,{\"children\":\"69.7%\"}],[\"$\",\"td\",null,{\"children\":\"93.9%\"}],[\"$\",\"td\",null,{\"children\":\"92.1%\"}],[\"$\",\"td\",null,{\"children\":\"~800K\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"R1-Distill-Qwen-32B\"}],[\"$\",\"td\",null,{\"children\":\"Qwen2.5-32B\"}],[\"$\",\"td\",null,{\"children\":\"32B\"}],[\"$\",\"td\",null,{\"children\":\"72.6%\"}],[\"$\",\"td\",null,{\"children\":\"94.3%\"}],[\"$\",\"td\",null,{\"children\":\"93.4%\"}],[\"$\",\"td\",null,{\"children\":\"~800K\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"R1-Distill-Llama-8B\"}],[\"$\",\"td\",null,{\"children\":\"Llama-3.1-8B\"}],[\"$\",\"td\",null,{\"children\":\"8B\"}],[\"$\",\"td\",null,{\"children\":\"50.4%\"}],[\"$\",\"td\",null,{\"children\":\"89.1%\"}],[\"$\",\"td\",null,{\"children\":\"87.2%\"}],[\"$\",\"td\",null,{\"children\":\"~800K\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"R1-Distill-Llama-70B\"}],[\"$\",\"td\",null,{\"children\":\"Llama-3.3-70B\"}],[\"$\",\"td\",null,{\"children\":\"70B\"}],[\"$\",\"td\",null,{\"children\":\"70.0%\"}],[\"$\",\"td\",null,{\"children\":\"94.5%\"}],[\"$\",\"td\",null,{\"children\":\"94.2%\"}],[\"$\",\"td\",null,{\"children\":\"~800K\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"3e:[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md\",\"style\":{\"--callout-color\":\"var(--color-fd-info, var(--color-fd-muted))\"},\"children\":[[\"$\",\"div\",null,{\"role\":\"none\",\"className\":\"w-0.5 bg-(--callout-color)/50 rounded-sm\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card\",\"children\":[[[\"$\",\"circle\",\"1mglay\",{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}],[\"$\",\"path\",\"1dtifu\",{\"d\":\"M12 16v-4\"}],[\"$\",\"path\",\"e9boi3\",{\"d\":\"M12 8h.01\"}]],\"$undefined\"]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-2 min-w-0 flex-1\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"text-fd-muted-foreground prose-no-margin empty:hidden\",\"children\":[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"蒸馏数据的构造方法\"}],\"：DeepSeek 使用 R1 模型在大量数学、代码和推理问题上生成包含完整思维链的回复。这些带有 \",[\"$\",\"code\",null,{\"children\":\"\u003cthink\u003e...\u003c/think\u003e\"}],\" 标签的长推理链成为蒸馏数据，学生模型通过 SFT 学习模仿教师的推理过程。\"]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"3f:[\"$\",\"h3\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"蒸馏的本质一种特殊的后训练\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#蒸馏的本质一种特殊的后训练\",\"className\":\"peer\",\"children\":\"蒸馏的本质：一种特殊的后训练\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"40:[\"$\",\"p\",null,{\"children\":[\"从后训练的视角看，\",[\"$\",\"strong\",null,{\"children\":\"黑盒蒸馏本质上就是用强模型生成的高质量数据对弱模型做 SFT\"}],\"：\"]}]\n"])</script><script>self.__next_f.push([1,"41:[\"$\",\"$L74\",null,{\"className\":\"shiki shiki-themes github-light github-dark\",\"style\":{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},\"tabIndex\":\"0\",\"icon\":\"\u003csvg viewBox=\\\"0 0 24 24\\\"\u003e\u003cpath d=\\\"M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z\\\" fill=\\\"currentColor\\\" /\u003e\u003c/svg\u003e\",\"children\":[\"$\",\"$L75\",null,{\"children\":[\"$\",\"code\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"children\":\"蒸馏 ≈ 数据生成（教师模型 → 高质量回复）+ SFT（学生模型学习这些回复）\"}]}]}]}]}]\n"])</script><script>self.__next_f.push([1,"42:[\"$\",\"p\",null,{\"children\":[\"这解释了为什么蒸馏如此有效——它同时解决了后训练中最关键的\",[\"$\",\"strong\",null,{\"children\":\"数据质量问题\"}],\"。教师模型生成的回复自然具有高质量，包含正确的推理步骤和良好的表达方式。\"]}]\n76:T5c0,"])</script><script>self.__next_f.push([1,"\u003csvg viewBox=\"0 0 24 24\"\u003e\u003cpath d=\"M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z\" fill=\"currentColor\" /\u003e\u003c/svg\u003e"])</script><script>self.__next_f.push([1,"43:[\"$\",\"$L74\",null,{\"className\":\"shiki shiki-themes github-light github-dark\",\"style\":{\"--shiki-light\":\"#24292e\",\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light-bg\":\"#fff\",\"--shiki-dark-bg\":\"#24292e\"},\"tabIndex\":\"0\",\"icon\":\"$76\",\"children\":[\"$\",\"$L75\",null,{\"children\":[\"$\",\"code\",null,{\"children\":[[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"# 黑盒蒸馏的典型流程\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"# Step 1: 用教师模型生成蒸馏数据\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" openai \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" OpenAI\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"client \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" OpenAI(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    base_url\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"https://api.deepseek.com\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    api_key\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"your-api-key\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\")\"}]}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\"}],\"\\n\",[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$L77\",\"$L78\",\"$L79\"]}],\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\"]}]}]}]\n"])</script><script>self.__next_f.push([1,"44:[\"$\",\"h3\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"蒸馏-vs-rl-训练的权衡\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#蒸馏-vs-rl-训练的权衡\",\"className\":\"peer\",\"children\":\"蒸馏 vs RL 训练的权衡\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"45:[\"$\",\"p\",null,{\"children\":[\"DeepSeek-R1 论文中一个重要发现：蒸馏在\",[\"$\",\"strong\",null,{\"children\":\"小模型\"}],\"上的效率远高于 RL 训练。\"]}]\n"])</script><script>self.__next_f.push([1,"46:[\"$\",\"div\",null,{\"className\":\"relative overflow-auto prose-no-margin my-6\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"维度\"}],[\"$\",\"th\",null,{\"children\":\"蒸馏（Distillation）\"}],[\"$\",\"th\",null,{\"children\":\"RL 训练（如 GRPO）\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"训练效率\"}]}],[\"$\",\"td\",null,{\"children\":\"高（标准 SFT 流程）\"}],[\"$\",\"td\",null,{\"children\":\"低（需要大量在线采样）\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"训练稳定性\"}]}],[\"$\",\"td\",null,{\"children\":\"高（监督学习）\"}],[\"$\",\"td\",null,{\"children\":\"中等（奖励信号稀疏）\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"能力上限\"}]}],[\"$\",\"td\",null,{\"children\":\"受教师模型制约\"}],[\"$\",\"td\",null,{\"children\":\"可能超越教师（探索新策略）\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"数据需求\"}]}],[\"$\",\"td\",null,{\"children\":\"需要教师模型的输出\"}],[\"$\",\"td\",null,{\"children\":\"需要可验证的奖励函数\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"适合模型规模\"}]}],[\"$\",\"td\",null,{\"children\":\"1.5B - 14B（小模型）\"}],[\"$\",\"td\",null,{\"children\":\"7B+（较大模型）\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"计算成本\"}]}],[\"$\",\"td\",null,{\"children\":\"教师推理 + 学生 SFT\"}],[\"$\",\"td\",null,{\"children\":\"大量在线采样 + RL 优化\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"47:[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md\",\"style\":{\"--callout-color\":\"var(--color-fd-warning, var(--color-fd-muted))\"},\"children\":[[\"$\",\"div\",null,{\"role\":\"none\",\"className\":\"w-0.5 bg-(--callout-color)/50 rounded-sm\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card\",\"children\":[[[\"$\",\"path\",\"wmoenq\",{\"d\":\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\"}],[\"$\",\"path\",\"juzpu7\",{\"d\":\"M12 9v4\"}],[\"$\",\"path\",\"p32p05\",{\"d\":\"M12 17h.01\"}]],\"$undefined\"]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-2 min-w-0 flex-1\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"text-fd-muted-foreground prose-no-margin empty:hidden\",\"children\":[[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"蒸馏的局限性\"}],\"：\"]}],[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"能力天花板\"}],\"——学生模型的能力不可能真正超越教师模型。如果教师在某类问题上犯错，学生也会学到错误的推理模式。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"风格模仿 vs 能力获得\"}],\"——蒸馏有时只是让学生模型学会了\\\"看起来像推理\\\"的输出格式，但没有真正获得推理能力。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"泛化性\"}],\"——蒸馏数据的分布有限，学生模型在分布外任务上的泛化可能不如 RL 训练的模型。\"]}],\"\\n\"]}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"48:[\"$\",\"p\",null,{\"children\":\"DeepSeek 的实验结果表明：\"}]\n49:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"对于 \",[\"$\",\"strong\",null,{\"children\":\"1.5B-7B 模型\"}],\"：蒸馏效果远优于直接 RL 训练（小模型难以通过 RL 发展出复杂推理）\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"对于 \",[\"$\",\"strong\",null,{\"children\":\"14B+ 模型\"}],\"：RL 训练有可能发现教师模型没有的推理策略，但需要更多计算资源\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"最佳实践\"}],\"：蒸馏 + RL 的组合——先用蒸馏建立推理基础，再用 RL 进一步优化\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"4a:[\"$\",\"h3\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"qwen3-的思考模式融合蒸馏思想的工业级应用\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#qwen3-的思考模式融合蒸馏思想的工业级应用\",\"className\":\"peer\",\"children\":\"Qwen3 的思考模式融合：蒸馏思想的工业级应用\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"4b:[\"$\",\"p\",null,{\"children\":\"Qwen3 的四阶段后训练流程中，**第三阶段\\\"思考模式融合\\\"**本质上是一种自蒸馏：\"}]\n"])</script><script>self.__next_f.push([1,"4c:[\"$\",\"div\",null,{\"className\":\"fd-steps\",\"children\":[[\"$\",\"div\",null,{\"className\":\"fd-step\",\"children\":[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Stage 1 — 冷启动 SFT\"}],\"：用长思维链数据训练模型获得初步推理能力\"]}]}],[\"$\",\"div\",null,{\"className\":\"fd-step\",\"children\":[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Stage 2 — 推理 RL\"}],\"：用 GRPO 在数学/代码任务上强化推理能力。此时模型是\\\"纯思考模型\\\"，始终输出思维链\"]}]}],[\"$\",\"div\",null,{\"className\":\"fd-step\",\"children\":[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Stage 3 — 思考模式融合（蒸馏）\"}],\"：将 Stage 2 的推理能力\\\"蒸馏\\\"回一个统一模型，使其同时支持 thinking mode（带 \",[\"$\",\"code\",null,{\"children\":\"\u003cthink\u003e\"}],\" 标签）和 non-thinking mode（直接回答）。具体方法是用 Stage 2 模型生成的思维链作为训练数据，与不带思维链的通用数据混合训练\"]}]}],[\"$\",\"div\",null,{\"className\":\"fd-step\",\"children\":[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Stage 4 — 通用 RL\"}],\"：对融合后的模型做最终 RL 训练，全面提升各项能力\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"4d:[\"$\",\"$L99\",null,{\"chart\":\"graph LR\\n  S2[\\\"Stage 2 模型\u003cbr/\u003e（纯推理）\\\"] --\u003e GEN[\\\"生成思维链数据\\\"]\\n  GEN --\u003e MIX[\\\"与通用数据混合\\\"]\\n  MIX --\u003e S3[\\\"Stage 3 统一模型\\\"]\\n  S3 --\u003e THINK[\\\"/think\u003cbr/\u003e带思维链推理\\\"]\\n  S3 --\u003e NOTHINK[\\\"/no_think\u003cbr/\u003e直接回答\\\"]\"}]\n4e:[\"$\",\"p\",null,{\"children\":\"这种\\\"将 RL 训练的能力通过数据方式迁移回统一模型\\\"的方法，正是蒸馏思想在 Qwen3 工业级实践中的体现。\"}]\n"])</script><script>self.__next_f.push([1,"4f:[\"$\",\"h2\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"蒸馏在后训练中的定位\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#蒸馏在后训练中的定位\",\"className\":\"peer\",\"children\":\"蒸馏在后训练中的定位\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"50:[\"$\",\"p\",null,{\"children\":\"将蒸馏放在后训练的整体技术图谱中：\"}]\n"])</script><script>self.__next_f.push([1,"51:[\"$\",\"div\",null,{\"className\":\"relative overflow-auto prose-no-margin my-6\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"后训练方法\"}],[\"$\",\"th\",null,{\"children\":\"训练信号来源\"}],[\"$\",\"th\",null,{\"children\":\"核心作用\"}],[\"$\",\"th\",null,{\"children\":\"蒸馏的角色\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"SFT\"}],[\"$\",\"td\",null,{\"children\":\"人工标注数据\"}],[\"$\",\"td\",null,{\"children\":\"教模型说话\"}],[\"$\",\"td\",null,{\"children\":\"蒸馏数据可替代人工标注\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"DPO/RLHF\"}],[\"$\",\"td\",null,{\"children\":\"人类偏好对\"}],[\"$\",\"td\",null,{\"children\":\"教模型选择\"}],[\"$\",\"td\",null,{\"children\":\"可用强模型生成偏好对\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"GRPO/RLVR\"}],[\"$\",\"td\",null,{\"children\":\"可验证奖励\"}],[\"$\",\"td\",null,{\"children\":\"教模型思考\"}],[\"$\",\"td\",null,{\"children\":\"蒸馏可传递推理能力\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"蒸馏\"}],[\"$\",\"td\",null,{\"children\":\"强模型输出\"}],[\"$\",\"td\",null,{\"children\":\"能力迁移\"}],[\"$\",\"td\",null,{\"children\":\"贯穿所有阶段\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"52:[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md\",\"style\":{\"--callout-color\":\"var(--color-fd-info, var(--color-fd-muted))\"},\"children\":[[\"$\",\"div\",null,{\"role\":\"none\",\"className\":\"w-0.5 bg-(--callout-color)/50 rounded-sm\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card\",\"children\":[[[\"$\",\"circle\",\"1mglay\",{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}],[\"$\",\"path\",\"1dtifu\",{\"d\":\"M12 16v-4\"}],[\"$\",\"path\",\"e9boi3\",{\"d\":\"M12 8h.01\"}]],\"$undefined\"]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-2 min-w-0 flex-1\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"text-fd-muted-foreground prose-no-margin empty:hidden\",\"children\":[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"蒸馏是后训练的\\\"万金油\\\"\"}],\"：在数据准备阶段，可以用强模型生成 SFT 数据（如 MAGPIE）；在偏好学习阶段，可以用强模型标注偏好对（如 UltraFeedback 使用 GPT-4 评分）；在推理强化阶段，可以直接蒸馏教师的推理链。可以说，\",[\"$\",\"strong\",null,{\"children\":\"现代后训练的每一步都或多或少地使用了蒸馏\"}],\"。\"]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"53:[\"$\",\"h2\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"性能对比蒸馏-vs-其他后训练方法\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#性能对比蒸馏-vs-其他后训练方法\",\"className\":\"peer\",\"children\":\"性能对比：蒸馏 vs 其他后训练方法\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"54:[\"$\",\"p\",null,{\"children\":\"以 Qwen2.5-1.5B 为基座，对比不同后训练路径的效果：\"}]\n"])</script><script>self.__next_f.push([1,"55:[\"$\",\"div\",null,{\"className\":\"relative overflow-auto prose-no-margin my-6\",\"children\":[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"children\":\"方法\"}],[\"$\",\"th\",null,{\"children\":\"GSM8K\"}],[\"$\",\"th\",null,{\"children\":\"MATH-500\"}],[\"$\",\"th\",null,{\"children\":\"训练成本\"}],[\"$\",\"th\",null,{\"children\":\"说明\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"Qwen2.5-1.5B（基座）\"}],[\"$\",\"td\",null,{\"children\":\"~35%\"}],[\"$\",\"td\",null,{\"children\":\"~25%\"}],[\"$\",\"td\",null,{\"children\":\"—\"}],[\"$\",\"td\",null,{\"children\":\"原始预训练模型\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"+ SFT（通用数据）\"}],[\"$\",\"td\",null,{\"children\":\"~50%\"}],[\"$\",\"td\",null,{\"children\":\"~35%\"}],[\"$\",\"td\",null,{\"children\":\"$$\"}],[\"$\",\"td\",null,{\"children\":\"学会了回答格式\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"+ SFT + DPO\"}],[\"$\",\"td\",null,{\"children\":\"~53%\"}],[\"$\",\"td\",null,{\"children\":\"~37%\"}],[\"$\",\"td\",null,{\"children\":\"$$$\"}],[\"$\",\"td\",null,{\"children\":\"偏好对齐小幅提升\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":\"+ SFT + GRPO（课堂实验级别）\"}],[\"$\",\"td\",null,{\"children\":\"~55%\"}],[\"$\",\"td\",null,{\"children\":\"~38%\"}],[\"$\",\"td\",null,{\"children\":\"$$$$\"}],[\"$\",\"td\",null,{\"children\":\"有限步数的 RL 训练\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"R1-Distill-Qwen-1.5B（蒸馏）\"}]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"~83.5%\"}]}],[\"$\",\"td\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"~83.9%\"}]}],[\"$\",\"td\",null,{\"children\":\"$$$\"}],[\"$\",\"td\",null,{\"children\":\"从 671B 教师蒸馏\"}]]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"56:[\"$\",\"div\",null,{\"ref\":\"$undefined\",\"className\":\"flex gap-2 my-4 rounded-xl border bg-fd-card p-3 ps-1 text-sm text-fd-card-foreground shadow-md\",\"style\":{\"--callout-color\":\"var(--color-fd-warning, var(--color-fd-muted))\"},\"children\":[[\"$\",\"div\",null,{\"role\":\"none\",\"className\":\"w-0.5 bg-(--callout-color)/50 rounded-sm\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-5 -me-0.5 fill-(--callout-color) text-fd-card\",\"children\":[[[\"$\",\"path\",\"wmoenq\",{\"d\":\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\"}],[\"$\",\"path\",\"juzpu7\",{\"d\":\"M12 9v4\"}],[\"$\",\"path\",\"p32p05\",{\"d\":\"M12 17h.01\"}]],\"$undefined\"]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col gap-2 min-w-0 flex-1\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"text-fd-muted-foreground prose-no-margin empty:hidden\",\"children\":[\"$\",\"p\",null,{\"children\":\"蒸馏模型的性能远超同等参数量的 RL 训练模型，但请注意——这个对比并不完全公平，因为蒸馏模型间接利用了教师模型的巨大计算投入。在\\\"单位计算投入\\\"的视角下，蒸馏的效率仍然非常高。\"}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"57:[\"$\",\"h2\",null,{\"className\":\"flex scroll-m-28 flex-row items-center gap-2\",\"id\":\"本节小结\",\"children\":[[\"$\",\"a\",null,{\"data-card\":\"\",\"href\":\"#本节小结\",\"className\":\"peer\",\"children\":\"本节小结\"}],[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-3.5 shrink-0 text-fd-muted-foreground opacity-0 transition-opacity peer-hover:opacity-100\",\"aria-label\":\"Link to section\",\"children\":[[[\"$\",\"path\",\"1cjeqo\",{\"d\":\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"}],[\"$\",\"path\",\"19qd67\",{\"d\":\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"}]],\"$undefined\"]}]]}]\n"])</script><script>self.__next_f.push([1,"58:[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"经典蒸馏\"}],\"通过软标签传递教师的\\\"暗知识\\\"，温度参数 \",[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"mi\",null,{\"children\":\"T\"}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"T\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.6833em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]]}]}]]}],\" 控制分布的平滑程度\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"LLM 时代的蒸馏\"}],\"以黑盒蒸馏（用教师文本输出做 SFT）为主流，DeepSeek-R1-Distill 系列是代表案例\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"蒸馏 vs RL\"}],\"：蒸馏在小模型上效率更高、更稳定；RL 在大模型上有潜力超越教师\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Qwen3 的思考模式融合\"}],\"是蒸馏思想的工业级应用——将 RL 训练的推理能力蒸馏回统一模型\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"蒸馏贯穿后训练全流程\"}],\"：数据生成、偏好标注、推理能力迁移都可以借助蒸馏\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"59:[\"$\",\"div\",null,{\"className\":\"flex flex-row flex-wrap items-center justify-between gap-4 empty:hidden\",\"children\":[\"$undefined\",\"$undefined\"]}]\n5a:[\"$\",\"$L9a\",null,{\"items\":\"$undefined\"}]\n5b:[\"$\",\"$L9b\",null,{\"children\":[\"$undefined\",[\"$\",\"h3\",null,{\"className\":\"inline-flex items-center gap-1.5 text-sm text-fd-muted-foreground\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide size-4\",\"children\":[[[\"$\",\"path\",\"olowqp\",{\"d\":\"M15 18H3\"}],[\"$\",\"path\",\"16j9eg\",{\"d\":\"M17 6H3\"}],[\"$\",\"path\",\"2avoz0\",{\"d\":\"M21 12H3\"}]],\"$undefined\"]}],[\"$\",\"$L9c\",null,{\"label\":\"toc\"}]]}],[\"$\",\"$L2c\",null,{\"children\":[\"$\",\"$L2d\",null,{}]}],\"$undefined\"]}]\n"])</script><script>self.__next_f.push([1,"5c:[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.3117em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.55em\",\"marginLeft\":\"-0.044em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"style\":{\"marginRight\":\"0.05724em\"},\"children\":\"j\"}]}]]}]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.2861em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"5d:[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"/\"}]\n5e:[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]\n5f:[\"$\",\"span\",null,{\"className\":\"mclose\",\"children\":\")\"}]\n60:[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.23em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"frac-line\",\"style\":{\"borderBottomWidth\":\"0.04em\"}}]]}]\n"])</script><script>self.__next_f.push([1,"61:[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.677em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mop\",\"children\":\"exp\"}],[\"$\",\"span\",null,{\"className\":\"mopen\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.04398em\"},\"children\":\"z\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.3117em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.55em\",\"marginLeft\":\"-0.044em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"children\":\"i\"}]}]]}]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.15em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]}]]}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"/\"}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}],[\"$\",\"span\",null,{\"className\":\"mclose\",\"children\":\")\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"62:[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]\n63:[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"1.1218em\"},\"children\":[\"$\",\"span\",null,{}]}]}]\n64:[\"$\",\"span\",null,{\"className\":\"mclose nulldelimiter\"}]\n65:[\"$\",\"span\",null,{\"className\":\"brace-center\",\"style\":{\"height\":\"0.548em\"},\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"400em\",\"height\":\"0.548em\",\"viewBox\":\"0 0 400000 548\",\"preserveAspectRatio\":\"xMidYMin slice\",\"children\":[\"$\",\"path\",null,{\"d\":\"M199572 214\\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z\"}]}]}]\n66:[\"$\",\"span\",null,{\"className\":\"brace-right\",\"style\":{\"height\":\"0.548em\"},\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"400em\",\"height\":\"0.548em\",\"viewBox\":\"0 0 400000 548\",\"preserveAspectRatio\":\"xMaxYMin slice\",\"children\":[\"$\",\"path\",null,{\"d\":\"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z\"}]}]}]\n"])</script><script>self.__next_f.push([1,"67:[\"$\",\"span\",null,{\"style\":{\"top\":\"-3em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8641em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.113em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":\"2\"}]}]]}]}]}]}]}]]}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}],[\"$\",\"span\",null,{\"className\":\"mbin\",\"children\":\"⋅\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}],[\"$\",\"span\",null,{\"className\":\"mord text\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"KL\"}]}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",null,{\"className\":\"minner\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mopen delimcenter\",\"style\":{\"top\":\"0em\"},\"children\":[\"$\",\"span\",null,{\"className\":\"delimsizing size1\",\"children\":\"(\"}]}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"children\":\"p\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8913em\"},\"children\":[[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.453em\",\"marginLeft\":\"0em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord text mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":\"teacher\"}]}]}]}]]}],[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.113em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]}]]}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.247em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]}]]}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"∥\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"children\":\"p\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8913em\"},\"children\":[[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.453em\",\"marginLeft\":\"0em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord text mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":\"student\"}]}]}]}]]}],[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.113em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mathnormal mtight\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}]}]]}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.247em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]}]]}],[\"$\",\"span\",null,{\"className\":\"mclose delimcenter\",\"style\":{\"top\":\"0em\"},\"children\":[\"$\",\"span\",null,{\"className\":\"delimsizing size1\",\"children\":\")\"}]}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"68:[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]\n69:[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.998em\"},\"children\":[\"$\",\"span\",null,{}]}]}]\n6a:[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]\n6b:[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"1.6763em\"},\"children\":[\"$\",\"span\",null,{}]}]}]\n6c:[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}]\n6d:[\"$\",\"span\",null,{\"className\":\"mbin\",\"children\":\"+\"}]\n6e:[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}]\n6f:[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"1em\",\"verticalAlign\":\"-0.25em\"}}],[\"$\",\"span\",null,{\"className\":\"mopen\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}],[\"$\",\"span\",null,{\"className\":\"mbin\",\"children\":\"−\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}]]}]\n70:[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"1em\",\"verticalAlign\":\"-0.25em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.0037em\"},\"children\":\"α\"}],[\"$\",\"span\",null,{\"className\":\"mclose\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}],[\"$\",\"span\",null,{\"className\":\"mbin\",\"children\":\"⋅\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.2222em\"}}]]}]\n"])</script><script>self.__next_f.push([1,"71:[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"2.3263em\",\"verticalAlign\":\"-1.5763em\"}}],[\"$\",\"span\",null,{\"className\":\"mord munder\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.75em\"},\"children\":[[\"$\",\"span\",null,{\"style\":{\"top\":\"-1.4237em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord text mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord cjk_fallback mtight\",\"children\":\"原始损失（向标签学习）\"}]}]}]}]]}],[\"$\",\"span\",null,{\"style\":{\"top\":\"-3em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"mord munder\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.75em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"svg-align\",\"style\":{\"top\":\"-2.102em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"stretchy\",\"style\":{\"height\":\"0.548em\",\"minWidth\":\"1.6em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"brace-left\",\"style\":{\"height\":\"0.548em\"},\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"400em\",\"height\":\"0.548em\",\"viewBox\":\"0 0 400000 548\",\"preserveAspectRatio\":\"xMinYMin slice\",\"children\":[\"$\",\"path\",null,{\"d\":\"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z\"}]}]}],[\"$\",\"span\",null,{\"className\":\"brace-center\",\"style\":{\"height\":\"0.548em\"},\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"400em\",\"height\":\"0.548em\",\"viewBox\":\"0 0 400000 548\",\"preserveAspectRatio\":\"xMidYMin slice\",\"children\":[\"$\",\"path\",null,{\"d\":\"M199572 214\\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z\"}]}]}],[\"$\",\"span\",null,{\"className\":\"brace-right\",\"style\":{\"height\":\"0.548em\"},\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"400em\",\"height\":\"0.548em\",\"viewBox\":\"0 0 400000 548\",\"preserveAspectRatio\":\"xMaxYMin slice\",\"children\":[\"$\",\"path\",null,{\"d\":\"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z\"}]}]}]]}]]}],[\"$\",\"span\",null,{\"style\":{\"top\":\"-3em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"3em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord text\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":\"CE\"}]}],[\"$\",\"span\",null,{\"className\":\"mopen\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.03588em\"},\"children\":\"y\"}],[\"$\",\"span\",null,{\"className\":\"mpunct\",\"children\":\",\"}],[\"$\",\"span\",null,{\"className\":\"mspace\",\"style\":{\"marginRight\":\"0.1667em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"children\":\"p\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t vlist-t2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.3361em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-2.55em\",\"marginLeft\":\"0em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord text mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":\"student\"}]}]}]}]]}]}],[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]]}],[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.15em\"},\"children\":[\"$\",\"span\",null,{}]}]}]]}]}]]}],[\"$\",\"span\",null,{\"className\":\"mclose\",\"children\":\")\"}]]}]]}]]}],\"$L9d\"]}],\"$L9e\"]}]}]]}]]}],\"$L9f\"]}],\"$La0\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"72:[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.8141em\"}}],[\"$\",\"span\",null,{\"className\":\"mord\",\"children\":[[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.13889em\"},\"children\":\"T\"}],[\"$\",\"span\",null,{\"className\":\"msupsub\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-t\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.8141em\"},\"children\":[\"$\",\"span\",null,{\"style\":{\"top\":\"-3.063em\",\"marginRight\":\"0.05em\"},\"children\":[[\"$\",\"span\",null,{\"className\":\"pstrut\",\"style\":{\"height\":\"2.7em\"}}],[\"$\",\"span\",null,{\"className\":\"sizing reset-size6 size3 mtight\",\"children\":[\"$\",\"span\",null,{\"className\":\"mord mtight\",\"children\":\"2\"}]}]]}]}]}]}]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"73:[\"$\",\"span\",null,{\"className\":\"katex\",\"children\":[[\"$\",\"span\",null,{\"className\":\"katex-mathml\",\"children\":[\"$\",\"math\",null,{\"xmlns\":\"http://www.w3.org/1998/Math/MathML\",\"children\":[\"$\",\"semantics\",null,{\"children\":[[\"$\",\"mrow\",null,{\"children\":[\"$\",\"mi\",null,{\"children\":\"α\"}]}],[\"$\",\"annotation\",null,{\"encoding\":\"application/x-tex\",\"children\":\"\\\\alpha\"}]]}]}]}],[\"$\",\"span\",null,{\"className\":\"katex-html\",\"aria-hidden\":\"true\",\"children\":[\"$\",\"span\",null,{\"className\":\"base\",\"children\":[[\"$\",\"span\",null,{\"className\":\"strut\",\"style\":{\"height\":\"0.4306em\"}}],[\"$\",\"span\",null,{\"className\":\"mord mathnormal\",\"style\":{\"marginRight\":\"0.0037em\"},\"children\":\"α\"}]]}]}]]}]\n77:[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"def\"}]\n78:[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" generate_distillation_data\"}]\n79:[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(prompt):\"}]\n7a:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"    \\\"\\\"\\\"用 DeepSeek-R1 生成带思维链的回复\\\"\\\"\\\"\"}]}]\n7b:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" client.chat.completions.create(\"}]]}]\n7c:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"        model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"deepseek-reasoner\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},"])</script><script>self.__next_f.push([1,"\"children\":\",\"}]]}]\n"])</script><script>self.__next_f.push([1,"7d:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"        messages\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"[{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"role\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"content\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": prompt}],\"}]]}]\n"])</script><script>self.__next_f.push([1,"7e:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    )\"}]}]\n7f:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}]\n80:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"        \\\"prompt\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": prompt,\"}]]}]\n81:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"        \\\"thinking\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": response.choices[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"].message.reasoning_content,\"}]]}]\n82:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"        \\\"response\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": response.choices[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"].message.content,\"}]]}]\n83:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    }\"}]}]\n84:[\"$\",\"span\",null,{\"className\":\"line\"}]\n85:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"# Step 2: 收集蒸馏数据\"}]}]"])</script><script>self.__next_f.push([1,"\n86:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"math_problems \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"...\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"]  \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"# GSM8K, MATH 等数据集的问题\"}]]}]\n"])</script><script>self.__next_f.push([1,"87:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"distill_data \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" [generate_distillation_data(p) \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" p \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" math_problems]\"}]]}]\n"])</script><script>self.__next_f.push([1,"88:[\"$\",\"span\",null,{\"className\":\"line\"}]\n89:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"# Step 3: 格式化为 SFT 训练数据\"}]}]\n8a:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" format_for_sft\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(sample):\"}]]}]\n8b:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}]\n8c:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"        \\\"messages\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": [\"}]]}]\n"])</script><script>self.__next_f.push([1,"8d:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"            {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"role\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"content\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": sample[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"prompt\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"]},\"}]]}]\n"])</script><script>self.__next_f.push([1,"8e:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"            {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"role\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"assistant\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"content\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": (\"}]]}]\n"])</script><script>self.__next_f.push([1,"8f:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"                f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"\u003cthink\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"\\\\n{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"sample[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"'thinking'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"]\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"}\\\\n\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\u003c/think\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"\\\\n\\\\n\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"90:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"                f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"sample[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"'response'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"]\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"\"}]]}]\n"])</script><script>self.__next_f.push([1,"91:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"            )},\"}]}]\n92:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        ]\"}]}]\n93:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    }\"}]}]\n94:[\"$\",\"span\",null,{\"className\":\"line\"}]\n"])</script><script>self.__next_f.push([1,"95:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"sft_dataset \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" [format_for_sft(s) \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" s \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" distill_data]\"}]]}]\n"])</script><script>self.__next_f.push([1,"96:[\"$\",\"span\",null,{\"className\":\"line\"}]\n97:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"# Step 4: 用 SFTTrainer 对学生模型进行微调\"}]}]\n98:[\"$\",\"span\",null,{\"className\":\"line\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"# （与标准 SFT 完全相同，只是数据来源不同）\"}]}]\n"])</script><script>self.__next_f.push([1,"9d:[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]\n9e:[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"0.898em\"},\"children\":[\"$\",\"span\",null,{}]}]}]\n9f:[\"$\",\"span\",null,{\"className\":\"vlist-s\",\"children\":\"​\"}]\na0:[\"$\",\"span\",null,{\"className\":\"vlist-r\",\"children\":[\"$\",\"span\",null,{\"className\":\"vlist\",\"style\":{\"height\":\"1.5763em\"},\"children\":[\"$\",\"span\",null,{}]}]}]\n"])</script><script>self.__next_f.push([1,"24:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n20:null\n"])</script><script>self.__next_f.push([1,"22:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"5.2 知识蒸馏 | LLM 后训练课程\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"理解经典知识蒸馏范式、LLM 时代的蒸馏实践（DeepSeek-R1-Distill、Qwen3 思考模式融合），以及蒸馏与 RL 训练的权衡\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"27:\"$22:metadata\"\n"])</script></body></html>